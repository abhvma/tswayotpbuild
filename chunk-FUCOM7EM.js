import{a as ae}from"./chunk-DWXU2WEP.js";import{a as oe}from"./chunk-N5DRZIOL.js";import{b as X}from"./chunk-FYYJT2A5.js";import{b as Y}from"./chunk-K3II63HG.js";import{b as ne}from"./chunk-C26SR4WM.js";import"./chunk-HVPVQXOI.js";import{d as ee,f as te,g as ie,h as re}from"./chunk-AQHU5BUJ.js";import{B as d,Bb as Z,C as y,D as w,G as T,H as u,Ia as A,L as m,P as o,Q as r,R as p,S as k,T as D,U as N,V as h,W as b,ba as O,ca as l,da as s,ib as V,jb as q,k as x,kb as Q,lb as $,na as P,nb as L,oa as M,pb as U,q as H,qa as B,qb as z,r as _,s as E,t as f,wa as j,wb as J,xa as R,y as a,ya as G,yb as W}from"./chunk-N56VVWT6.js";import{a as K,b as F,h as S}from"./chunk-ENRHZQ2S.js";var g=class t{constructor(i){this.fb=i;this.filterForm=this.fb.group({customerId:["",q.required]})}filterChange=new f;filterForm;eSerialType=ee;eStatusType=te;onSubmit(){this.filterChange.emit({customerId:this.filterForm.get("customerId").value})}ngOnDestroy(){}static \u0275fac=function(e){return new(e||t)(d(J))};static \u0275cmp=y({type:t,selectors:[["app-key-history-filterbar"]],outputs:{filterChange:"filterChange"},standalone:!1,decls:10,vars:2,consts:[[1,"filterbar","mb-3"],[1,"row","g-3","align-items-end",3,"formGroup"],[1,"col-md-4"],["for","customerId",1,"form-label","small","mb-1"],["type","text","id","customerId","formControlName","customerId",1,"form-control"],[1,"col-auto"],[1,"btn","btn-primary","w-100","d-flex","align-items-center","justify-content-center","gap-2",3,"click","disabled"],[1,"bi","bi-search"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),l(4,"CustomerId"),r(),p(5,"input",4),r(),o(6,"div",5)(7,"button",6),h("click",function(){return n.onSubmit()}),p(8,"i",7),l(9," Search "),r()()()()),e&2&&(a(),m("formGroup",n.filterForm),a(6),m("disabled",n.filterForm.invalid))},dependencies:[L,V,Q,$,U,z],encapsulation:2})};function de(t,i){if(t&1&&(o(0,"th",3),l(1),r()),t&2){let e=i.$implicit;m("width",e.width),a(),s(e.label)}}function ye(t,i){if(t&1&&(o(0,"tr")(1,"td"),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),P(7,"keySecret"),r(),o(8,"td"),l(9),r(),o(10,"td"),l(11),r(),o(12,"td"),l(13),r()()),t&2){let e,n=i.$implicit,c=b();a(2),s(n.customerId),a(2),s(n.serialNumber),a(2),s(M(7,6,n.otpKey)),a(3),s((e=c.getBranchNameForCode(n.branchCode))==null?null:e.branchName),a(2),s(n.status),a(2),s(n.traceDate.date())}}var C=class t{constructor(i){this.branchService=i}models=[];editClick=new f;deleteClick=new f;ngOnInit(){this.branchService.get().then()}columns=[{label:"Customer ID",width:"15%"},{label:"Serial Number",width:"20%"},{label:"OTP Key",width:"20%"},{label:"Branch",width:"15%"},{label:"Status",width:"10%"},{label:"Date",width:"20%"}];getBranchNameForCode(i){return this.branchService.getBranchForCode(i)}static \u0275fac=function(e){return new(e||t)(d(X))};static \u0275cmp=y({type:t,selectors:[["app-key-history-table"]],inputs:{models:"models"},outputs:{editClick:"editClick",deleteClick:"deleteClick"},standalone:!1,decls:6,vars:2,consts:[[1,"tsway-datatable","striped"],[3,"width",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"width"]],template:function(e,n){e&1&&(o(0,"table",0)(1,"thead")(2,"tr"),u(3,de,2,2,"th",1),r()(),o(4,"tbody"),u(5,ye,14,8,"tr",2),r()()),e&2&&(a(3),m("ngForOf",n.columns),a(2),m("ngForOf",n.models))},dependencies:[j,oe],encapsulation:2})};function ue(t,i){if(t&1&&(k(0),p(1,"app-key-history-table",7),D()),t&2){let e=b();a(),m("models",e.models)}}function he(t,i){t&1&&p(0,"div",8)}function be(t,i){t&1&&(o(0,"div",9)(1,"div"),p(2,"i",10),o(3,"p",3),l(4,"Key records not found."),r()()())}var v=class t extends ne{hasSearched=!1;constructor(i){super(i),this.modelService=i.get(ae)}getFilterParams(){let i=[],e=this.modelFilters;return i}applyFilters(){return S(this,null,function*(){this.hasSearched=!0,this.paginationOption=F(K({},this.paginationOption),{startPage:0,currentPage:0}),yield this.loadModels(!1)})}openDialog(i){return S(this,null,function*(){throw new Error("Method not implemented")})}static \u0275fac=function(e){return new(e||t)(d(E))};static \u0275cmp=y({type:t,selectors:[["app-key-history"]],standalone:!1,features:[T],decls:9,vars:3,consts:[["noData",""],[1,"container-fluid","py-4","d-flex","flex-column","vh-100"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[3,"filterChange"],[4,"ngIf","ngIfElse"],["class","mb-4 fixed",4,"ngIf"],[3,"models"],[1,"mb-4","fixed"],[1,"d-flex","justify-content-center","align-items-center","h-100","text-muted","text-center","px-4"],[1,"bi","bi-search","display-6","d-block","mb-2"]],template:function(e,n){if(e&1){let c=N();o(0,"div",1)(1,"div",2)(2,"h2",3),l(3,"Key History"),r()(),o(4,"app-key-history-filterbar",4),h("filterChange",function(se){return H(c),_(n.onFilterChange(se))}),r(),u(5,ue,2,1,"ng-container",5)(6,he,1,0,"div",6)(7,be,5,0,"ng-template",null,0,B),r()}if(e&2){let c=O(8);a(5),m("ngIf",n.models.length>0)("ngIfElse",c),a(),m("ngIf",n.hasSearched)}},dependencies:[R,g,C],encapsulation:2})};var ge=[{path:"",component:v}],me=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=w({type:t});static \u0275inj=x({providers:[Y,ie],imports:[re,G,A.forChild(ge),W,Z]})};export{me as KeyHistoryModule};
