import{a as Be}from"./chunk-E4NJMOUK.js";import{b as je,c as ze,d as Ge,e as $e}from"./chunk-L5VZUKE7.js";import{b as Ae}from"./chunk-RTYJ3KJZ.js";import{c as ee}from"./chunk-H3BM6XEB.js";import{b as T}from"./chunk-T2N4ABTV.js";import{a as ne}from"./chunk-XMEF5JSX.js";import{b as He}from"./chunk-JYQU34QQ.js";import{a as te}from"./chunk-HVPVQXOI.js";import{d as K,f as j,g as y,h as Ue}from"./chunk-GZ6MRCQF.js";import{$ as Oe,B as d,Ba as Ie,Bb as Le,C as S,D as Se,Da as Me,Fa as Ne,G as ye,Ga as xe,H as $,Ha as De,Ja as C,K as o,La as Y,M as he,Ma as Z,O as n,P as i,Q as p,R as Ce,S as be,Sa as Ve,T as H,U as u,V as h,Xa as ue,Ya as Pe,Z as _e,Za as Re,_ as ke,aa as Te,ba as s,ca as Ee,da as de,ia as Q,ib as N,ja as J,jb as v,k as ve,kb as x,lb as D,ma as M,na as W,nb as V,oa as we,ob as P,p as G,pa as Ke,pb as R,q as b,qb as q,r as _,rb as A,s as ge,sb as L,t as O,tb as U,wa as X,wb as B,x as I,xa as Fe,y as a,yb as qe,zb as ie}from"./chunk-A6I4HBFG.js";import{a as w,b as ce,h as g}from"./chunk-ENRHZQ2S.js";var Xe=()=>({exact:!0}),re=class l{static \u0275fac=function(t){return new(t||l)};static \u0275cmp=S({type:l,selectors:[["app-serial-key"]],standalone:!1,decls:10,vars:2,consts:[[1,"container","mt-3"],[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","./","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","stats","routerLinkActive","active",1,"nav-link"],[1,"mt-3"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),s(4," Cards & Tokens "),i()(),n(5,"li",2)(6,"a",4),s(7," Stats "),i()()(),n(8,"div",5),p(9,"router-outlet"),i()()),t&2&&(a(3),o("routerLinkActiveOptions",J(1,Xe)))},dependencies:[Me,Ne,xe],encapsulation:2})};var ae=class l{constructor(m,t,e){this.fb=m;this.toast=t;this.serialKeyService=e;this.userForm=this.fb.group({otptype:[2,v.required],count:[1,[v.required,v.min(1),v.max(1e4)]],branch_cd:[void 0,v.required],bank_cd:[void 0,v.required],command:[3],from:[1],status:[0]}),this.userForm.get("otptype")?.valueChanges.subscribe(r=>{this.user&&this.setting&&this.serialKeyService.getLastMaxCount(this.setting.bankCode,this.user.branchName,this.userForm.get("otptype").value).then(c=>{this.lastMaxCount=c})})}user;setting;save=new O;cancel=new O;lastMaxCount;modalTitle="Generate Keys";userForm;eOtpType=K;dialogRef;userNotUnique=!1;ngOnChanges(){this.user&&this.userForm.get("branch_cd").setValue(this.user.branchName),this.setting&&this.userForm.get("bank_cd").setValue(this.setting.bankCode),this.user&&this.setting&&this.serialKeyService.getLastMaxCount(this.setting.bankCode,this.user.branchName,this.userForm.get("otptype").value).then(m=>{this.lastMaxCount=m})}onSave(){return g(this,null,function*(){let m=new te;try{m.show();let t=w({},this.userForm.value);t.from=this.lastMaxCount,t.to=+t.count+ +t.from,delete t.count,yield this.serialKeyService.generateKey(t),this.dialogRef.close(void 0),this.toast.success(`${this.userForm.get("count")?.value} key${this.userForm.value.count>1?"s":""} generated successfully.`)}catch(t){this.toast.error(t.msg)}finally{m.hide()}})}onCancel(){this.dialogRef.close(void 0),this.cancel.emit()}get formControls(){return this.userForm.controls}static \u0275fac=function(t){return new(t||l)(d(B),d(ie),d(y))};static \u0275cmp=S({type:l,selectors:[["app-otp-serial-key-create-modal"]],inputs:{user:"user",setting:"setting"},outputs:{save:"save",cancel:"cancel"},standalone:!1,features:[Q([T,y]),G],decls:30,vars:5,consts:[[1,"modal-content",3,"formGroup"],[1,"tsway-modal-header"],[1,"tsway-modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"tsway-modal-body"],[1,"row"],[1,"col-md"],["for","otptype",1,"form-label","small","mb-1"],["id","otptype","formControlName","otptype",1,"form-control"],[3,"ngValue"],["for","count",1,"form-label","small","mb-1"],["type","number","formControlName","count","id","count",1,"form-control"],["role","alert",1,"alert","alert-info","alert-sm","py-1","px-2","mb-2","mt-2"],[1,"small","mb-0"],[1,"bi","bi-info-circle-fill","me-2"],[1,"tsway-modal-footer","d-flex","flex-row-reverse","justify-content-start"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-danger","me-2","text-white",3,"click"]],template:function(t,e){t&1&&(n(0,"form",0)(1,"div",1)(2,"h5",2),s(3,"Generate Key"),i(),n(4,"button",3),u("click",function(){return e.onCancel()}),i()(),n(5,"div",4)(6,"div",5)(7,"section",6)(8,"label",7),s(9,"Type"),i(),n(10,"select",8)(11,"option",9),s(12,"Card"),i(),n(13,"option",9),s(14,"Token"),i()()(),n(15,"section",6)(16,"label",10),s(17,"Number of Key to generate?"),i(),p(18,"input",11),i()(),n(19,"div",12)(20,"p",13),p(21,"i",14),s(22," Last sequence number issued: "),n(23,"strong"),s(24),i()()()(),n(25,"div",15)(26,"button",16),u("click",function(){return e.onSave()}),s(27," Save "),i(),n(28,"button",17),u("click",function(){return e.onCancel()}),s(29," Cancel "),i()()()),t&2&&(o("formGroup",e.userForm),a(11),o("ngValue",e.eOtpType.Card),a(2),o("ngValue",e.eOtpType.Token),a(11),Ee(e.lastMaxCount),a(2),o("disabled",e.userForm.invalid))},dependencies:[V,L,U,N,P,A,x,D,R,q],styles:["[_nghost-%COMP%]{font-size:.875rem!important}"]})};var oe=class l{constructor(m,t,e){this.fb=m;this.toast=t;this.serialKeyService=e;this.form=this.fb.group({otptype:[2,v.required],branch_cd:[void 0,v.required],bank_cd:[void 0,v.required],command:[3],from:[1,[v.required,v.min(1)]],to:[1,[v.required,v.min(1),v.max(1e4)]],status:[0]}),this.form.get("otptype")?.valueChanges.subscribe(r=>{this.user&&this.setting&&this.getRanges(r)})}user;setting;status=1;otpType=2;save=new O;cancel=new O;dialogRef;modalTitle="Generate Keys";form;eOtpType=K;eStatus=j;userNotUnique=!1;getRanges(m){this.serialKeyService.getRangesForStatus(this.setting.bankCode,this.user.branchName,m,this.status===1?0:1).then(t=>{t.length>0?(this.form.get("from")?.setValue(t[0]),this.form.get("to")?.setValue(t[1])):(this.form.get("from")?.setValue(1),this.form.get("to")?.setValue(1))})}ngOnChanges(){this.user&&this.form.get("branch_cd").setValue(this.user.branchName),this.setting&&this.form.get("bank_cd").setValue(this.setting.bankCode),this.user&&this.setting&&this.getRanges(this.form.get("otptype").value),this.form.get("status")?.setValue(this.status),this.form.get("otptype")?.setValue(this.otpType)}onSave(){return g(this,null,function*(){let m=new te;try{let t;m.show();let e=w({},this.form.value);if(t=yield this.serialKeyService.get([{bankCode:C(e.bank_cd)},{branchCode:C(e.branch_cd)},{sequenceNumber:Y(e.from)},{sequenceNumber:Z(e.to)},{otpType:C(e.otptype)},{status:C(this.status===1?0:1)}]),t.length===0){this.toast.warning(`No data found in the range of [${e.from},${e.to}]`);return}let r;e.status===this.eStatus.Registered?r=this.serialKeyService.sendForManufacturing(e.bank_cd,e.branch_cd,e.from,e.to):r=this.serialKeyService.markAsDelivered(e.bank_cd,e.branch_cd,e.from,e.to),yield r,t.forEach(c=>{c.status=this.status}),this.dialogRef.close(t),this.toast.success(`Serial Key from ${e.from} to ${e.to} updated to ${e.status===this.eStatus.Registered?"Registered":"Enrolled"} successfully.`)}catch(t){this.toast.error(t.msg)}finally{m.hide()}})}onCancel(){this.dialogRef.close(void 0),this.cancel.emit()}get formControls(){return this.form.controls}static \u0275fac=function(t){return new(t||l)(d(B),d(ie),d(y))};static \u0275cmp=S({type:l,selectors:[["app-otp-serial-key-create-modal"]],inputs:{user:"user",setting:"setting",status:"status",otpType:"otpType"},outputs:{save:"save",cancel:"cancel"},standalone:!1,features:[Q([y]),G],decls:33,vars:7,consts:[[1,"modal-content",3,"formGroup"],[1,"tsway-modal-header"],[1,"tsway-modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"tsway-modal-body"],[1,"row"],[1,"col-md-12"],["for","otptype",1,"form-label","small","mb-1"],["id","otptype","formControlName","otptype",1,"form-control"],[3,"ngValue"],["for","from",1,"form-label","small","mb-1"],["type","number","formControlName","from","id","from",1,"form-control"],["for","to",1,"form-label","small","mb-1"],["type","number","formControlName","to","id","to",1,"form-control"],["for","status",1,"form-label","small","mb-1","d-block"],[1,"form-control","d-block",3,"innerHTML"],[1,"tsway-modal-footer","d-flex","flex-row-reverse","justify-content-start"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-danger","me-2","text-white",3,"click"]],template:function(t,e){t&1&&(n(0,"form",0)(1,"div",1)(2,"h5",2),s(3,"Bulk Update"),i(),n(4,"button",3),u("click",function(){return e.onCancel()}),i()(),n(5,"div",4)(6,"div",5)(7,"section",6)(8,"label",7),s(9,"Type"),i(),n(10,"select",8)(11,"option",9),s(12,"Card"),i(),n(13,"option",9),s(14,"Token"),i()()(),n(15,"section",6)(16,"label",10),s(17,"Sequence Number Start"),i(),p(18,"input",11),i(),n(19,"section",6)(20,"label",12),s(21,"Sequence Number End"),i(),p(22,"input",13),i(),n(23,"section",6)(24,"span",14),s(25,"Status"),i(),p(26,"span",15),M(27,"serialNumberStatus"),i()()(),n(28,"div",16)(29,"button",17),u("click",function(){return e.onSave()}),s(30," Save "),i(),n(31,"button",18),u("click",function(){return e.onCancel()}),s(32," Cancel "),i()()()),t&2&&(o("formGroup",e.form),a(11),o("ngValue",e.eOtpType.Card),a(2),o("ngValue",e.eOtpType.Token),a(13),o("innerHTML",W(27,5,e.status),I),a(3),o("disabled",e.form.invalid))},dependencies:[V,L,U,N,P,A,x,D,R,q,je],styles:["[_nghost-%COMP%]{font-size:.875rem!important}"]})};var se=class l{constructor(m){this.fb=m;this.filterForm=this.fb.group({type:[this.eSerialType.Card],status:[this.eStatusType.Created],sequenceStart:[],sequenceEnd:[]}),this.dateFrom=this.filterForm.get("dateFrom"),this.dateTo=this.filterForm.get("dateTo")}filterChange=new O;filterForm;eSerialType=K;eStatusType=j;dateFrom;dateTo;onSubmit(){this.filterChange.emit({type:this.filterForm.get("type").value,status:Pe(this.filterForm.get("status").value)?-1:this.filterForm.get("status").value,sequenceStart:this.filterForm.get("sequenceStart").value?this.filterForm.get("sequenceStart").value:void 0,sequenceEnd:this.filterForm.get("sequenceEnd").value?this.filterForm.get("sequenceEnd").value:void 0})}ngOnDestroy(){}static \u0275fac=function(t){return new(t||l)(d(B))};static \u0275cmp=S({type:l,selectors:[["app-serial-key-filterbar"]],outputs:{filterChange:"filterChange"},standalone:!1,decls:36,vars:9,consts:[[1,"filterbar","mb-3"],[1,"row","g-3","align-items-end",3,"formGroup"],[1,"col-md"],["for","type",1,"form-label","small","mb-1"],["id","type","formControlName","type",1,"form-control"],[3,"ngValue"],["for","sequenceStart",1,"form-label","small","mb-1"],["type","number","id","sequenceStart","formControlName","sequenceStart",1,"form-control"],["for","sequenceEnd",1,"form-label","small","mb-1"],["type","number","id","sequenceEnd","formControlName","sequenceEnd",1,"form-control"],["for","status",1,"form-label","small","mb-1"],["id","status","formControlName","status",1,"form-control"],[1,"col-auto"],[1,"btn","btn-primary","w-100","d-flex","align-items-center","justify-content-center","gap-2",3,"click","disabled"],[1,"bi","bi-search"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),s(4,"Type"),i(),n(5,"select",4)(6,"option",5),s(7,"Card"),i(),n(8,"option",5),s(9,"Token"),i()()(),n(10,"div",2)(11,"label",6),s(12,"Sequence Start"),i(),p(13,"input",7),i(),n(14,"div",2)(15,"label",8),s(16,"Sequence End"),i(),p(17,"input",9),i(),n(18,"div",2)(19,"label",10),s(20,"Status"),i(),n(21,"select",11)(22,"option",5),s(23,"Created"),i(),n(24,"option",5),s(25,"Registered"),i(),n(26,"option",5),s(27,"Enrolled"),i(),n(28,"option",5),s(29,"Active"),i(),n(30,"option",5),s(31,"Revoked"),i()()(),n(32,"div",12)(33,"button",13),u("click",function(){return e.onSubmit()}),p(34,"i",14),s(35," Search "),i()()()()),t&2&&(a(),o("formGroup",e.filterForm),a(5),o("ngValue",e.eSerialType.Card),a(2),o("ngValue",e.eSerialType.Token),a(14),o("ngValue",e.eStatusType.Created),a(2),o("ngValue",e.eStatusType.Registered),a(2),o("ngValue",e.eStatusType.Enrolled),a(2),o("ngValue",e.eStatusType.Active),a(2),o("ngValue",e.eStatusType.Revoked),a(3),o("disabled",e.filterForm.invalid))},dependencies:[V,L,U,N,P,A,x,D,R,q],encapsulation:2})};function nt(l,m){if(l&1){let t=H();Ce(0),n(1,"app-otp-serial-key-table",14),u("sendForManufacturingAction",function(r){b(t);let c=h();return _(c.onSendForManufacturing(r))})("markAsDeliveredAction",function(r){b(t);let c=h();return _(c.onMarkAsDelivered(r))}),i(),be()}if(l&2){let t=h();a(),o("models",t.models)}}function rt(l,m){if(l&1){let t=H();n(0,"div",15)(1,"app-paginator",16),u("pageChange",function(r){b(t);let c=h();return _(c.onPageChange(r))})("pageSizeChange",function(r){b(t);let c=h();return _(c.onPageSizeChange(r))}),i()()}if(l&2){let t=h();a(),o("currentPage",t.paginationOption.currentPage)("pageSize",t.paginationOption.pageSize)("total",t.paginationOption.total)("startPage",1)("totalNotKnown",!1)}}function at(l,m){l&1&&(n(0,"div",17)(1,"div"),p(2,"i",18),n(3,"p",4),s(4,"Key records not found."),i()()())}var le=class l extends He{constructor(t,e,r,c,f){super(f);this.authService=e;this.settingService=r;this.branchService=c;this.modelService=t}setting;user;hasSearched=!1;getFilterParams(){let t=[],e=this.modelFilters;return e.type&&t.push({otpType:C(e.type)}),Number(e.status)>-1&&t.push({status:C(e.status)}),e.sequenceStart&&t.push({sequenceNumber:Y(e.sequenceStart)}),e.sequenceEnd&&t.push({sequenceNumber:Z(e.sequenceEnd)}),t.push({bankCode:C(this.setting.bankCode)}),t.push({branchCode:C(this.user.branchName)}),t}ngOnInit(){this.settingService.find().then(t=>{this.setting=t}),this.branchService.get().then(),this.user=this.authService.authUser()}getOrder(){return{sequenceNumber:"ASC"}}applyFilters(){return g(this,null,function*(){this.hasSearched=!0,this.paginationOption=ce(w({},this.paginationOption),{startPage:0,currentPage:0}),this.paginationOption.total=yield this.modelService.getCount(this.getFilterParams()),yield this.loadModels(!0)})}openDialog(t){return g(this,null,function*(){(yield this.dialog.open(ae,{user:this.user,setting:this.setting},{width:"35%"})).closed.subscribe(r=>{})})}onPageChange(t){this.paginationOption=ce(w({},this.paginationOption),{currentPage:t}),this.loadModels(!0)}onPageSizeChange(t){this.paginationOption.pageSize=t}onSendForManufacturing(t){return g(this,null,function*(){if(yield this.alert.show("Confirm Action","Are you sure you want to send these items for registration?","primary")){let r=!1,c=ue(t.map(f=>f.sequenceNumber));for(let f of c)try{yield this.modelService.sendForManufacturing(this.setting.bankCode,this.user.branchName,f.start,f.end),this.loadModels().then(),r=!0,this.toast.success(`Serial Key from ${f.start} to ${f.end} updated to registered successfully.`)}catch{r=!1,this.toast.error("Update status change failed.")}r&&this.downloadKeySerial(t)}})}onMarkAsDelivered(t){return g(this,null,function*(){if(yield this.alert.show("Confirm Action","Are you sure you want to send these items as enrolled?","primary")){let r=ue(t.map(c=>c.sequenceNumber));for(let c of r)try{yield this.modelService.markAsDelivered(this.setting.bankCode,this.user.branchName,c.start,c.end),this.loadModels().then(),this.toast.success(`Serial Keys from ${c.start} to ${c.end} updated to enrolled successfully.`)}catch{this.toast.error("Update status change failed.")}}})}downloadKeySerial(t){let e=[];e.push("Bank Name,Branch Name,SerialNumber,OtpKey,Created Date"),t.forEach(E=>{let We=Re(E.bankCode,E.branchCode,E.sequenceNumber+"");e.push(`${Ve[E.bankCode]||"NA"},${this.branchService.getBranchForCode(E.branchCode)?.branchName||"NA"},${We},${E.otpKey},${E.createdDate.date()}`)});let r=e.join(`
`),c=new Blob([r],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(c),k=document.createElement("a");k.href=f,k.setAttribute("download",`${t[0].otpType===2?"card":"token"}-otp-keys.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(f)}onBulkUpdateClick(){return g(this,null,function*(){let t=this.getBulkUpdateDisableState().allCreated?1:2;(yield this.dialog.open(oe,{status:t,user:this.user,setting:this.setting,otpType:this.modelFilters.type||2},{width:"30%"})).closed.subscribe(r=>{r&&r.length>0&&(this.loadModels(!0).then(),t===1&&this.downloadKeySerial(r))})})}downloadCSVForSearchResult(){return g(this,null,function*(){this.models.length>0&&this.downloadKeySerial(this.models)})}getBulkUpdateDisableState(){if(this.models.length===0)return{allCreated:!1,allManufacturing:!1,disabled:!0};let t=this.models.every(r=>r.status===0),e=this.models.every(r=>r.status===1);return this.modelFilters.status===0&&t?{allCreated:!0,allManufacturing:!1,disabled:!1}:this.modelFilters.status===1&&e?{allCreated:!1,allManufacturing:!0,disabled:!1}:{allCreated:!1,allManufacturing:!1,disabled:!0}}static \u0275fac=function(e){return new(e||l)(d(y),d(ee),d(T),d(Ae),d(ge))};static \u0275cmp=S({type:l,selectors:[["app-otp-device-list"]],standalone:!1,features:[ye],decls:20,vars:5,consts:[["button",""],["noData",""],[1,"container-fluid","py-4","d-flex","flex-column","vh-100"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[1,"btn","btn-danger","text-white",3,"click"],[1,"bi","bi-plus-lg","me-1"],[3,"filterChange"],[1,"d-flex","justify-content-end","mb-2"],["role","button",1,"btn","btn-small","btn-link","text-muted","small","text-decoration-none",3,"click","disabled"],[1,"bi","bi-journals","me-1"],[1,"bi","bi-download","me-1"],[4,"ngIf","ngIfElse"],["class","mb-4 fixed",4,"ngIf"],[3,"sendForManufacturingAction","markAsDeliveredAction","models"],[1,"mb-4","fixed"],[3,"pageChange","pageSizeChange","currentPage","pageSize","total","startPage","totalNotKnown"],[1,"d-flex","justify-content-center","align-items-center","h-100","text-muted","text-center","px-4"],[1,"bi","bi-search","display-6","d-block","mb-2"]],template:function(e,r){if(e&1){let c=H();n(0,"div",2)(1,"div",3)(2,"h2",4),s(3,"Cards & Tokens"),i(),n(4,"button",5,0),u("click",function(){return b(c),_(r.addModel())}),p(6,"i",6),s(7,"Create "),i()(),n(8,"app-serial-key-filterbar",7),u("filterChange",function(k){return b(c),_(r.onFilterChange(k))}),i(),n(9,"div",8)(10,"button",9),u("click",function(){return b(c),_(r.onBulkUpdateClick())}),p(11,"i",10),s(12," Bulk Update "),i(),n(13,"button",9),u("click",function(){return b(c),_(r.downloadCSVForSearchResult())}),p(14,"i",11),s(15," Download CSV"),i()(),$(16,nt,2,1,"ng-container",12)(17,rt,2,5,"div",13)(18,at,5,0,"ng-template",null,1,Ke),i()}if(e&2){let c=Te(19);a(10),o("disabled",r.getBulkUpdateDisableState().disabled),a(3),o("disabled",r.models.length===0),a(3),o("ngIf",r.models.length>0)("ngIfElse",c),a(),o("ngIf",r.hasSearched)}},dependencies:[$e,X,ne,se],encapsulation:2})};var ot=["card"],st=()=>({shorten:!0});function lt(l,m){if(l&1&&p(0,"i"),l&2){let t=h();he("bi "+t.iconClass)}}function pt(l,m){if(l&1&&p(0,"span",9),l&2){let t=h();o("innerHTML",t.svgIcon,I)}}var pe=class l{title="";value="";changeText="";iconClass="";svgIcon;container;static \u0275fac=function(t){return new(t||l)};static \u0275cmp=S({type:l,selectors:[["app-stat-card"]],viewQuery:function(t,e){if(t&1&&_e(ot,5),t&2){let r;ke(r=Oe())&&(e.container=r.first)}},inputs:{title:"title",value:"value",changeText:"changeText",iconClass:"iconClass",svgIcon:"svgIcon"},standalone:!1,decls:12,vars:8,consts:[["card",""],[1,"stat-card","card","border-0","p-3"],[1,"d-flex","align-items-center"],[1,"icon-wrapper","d-flex","align-items-center","justify-content-center","flex-shrink-0","me-3"],[3,"class",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"d-flex","flex-column"],[1,"stat-title","text-muted"],[1,"stat-value","fw-bold"],[3,"innerHTML"]],template:function(t,e){t&1&&(n(0,"div",1,0)(2,"div",2)(3,"div",3),$(4,lt,1,2,"i",4)(5,pt,1,1,"span",5),i(),n(6,"div",6)(7,"span",7),s(8),i(),n(9,"span",8),s(10),M(11,"numberLocale"),i()()()()),t&2&&(a(4),o("ngIf",!e.svgIcon),a(),o("ngIf",e.svgIcon),a(3),de(" ",e.title," "),a(2),de(" ",we(11,4,e.value,J(7,st))," "))},dependencies:[X,Be],styles:[".stat-card[_ngcontent-%COMP%]{background-color:#f1f1f1}.stat-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:30px;background-color:#c7e6f9}.stat-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:44px;color:var(--bs-primary)}.stat-card[_ngcontent-%COMP%]   .stat-title[_ngcontent-%COMP%]{font-size:16px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px}.stat-card[_ngcontent-%COMP%]   .stat-change[_ngcontent-%COMP%]{font-size:14px}"]})};var me=class l{constructor(m,t,e,r){this.modelService=m;this.authService=t;this.settingService=e;this.sanitizer=r;this.modelService=m,this.tokenIcon=this.sanitizer.bypassSecurityTrustHtml(ze)}setting;user;tokenIcon;stats={totalCardCount:0,rawCardCount:0,registeredCardCount:0,enrolledCardCount:0,activeCardCount:0,inactiveCardCount:0,totalTokenCount:0,rawTokenCount:0,registeredTokenCount:0,enrolledTokenCount:0,activeTokenCount:0,inactiveTokenCount:0};ngOnInit(){return g(this,null,function*(){this.setting=yield this.settingService.find(),this.user=yield this.authService.authUser(),this.stats=yield this.loadStats()})}loadStats(){return g(this,null,function*(){return this.modelService.getStats(this.setting.bankCode,this.user.branchName)})}static \u0275fac=function(t){return new(t||l)(d(y),d(ee),d(T),d(Ie))};static \u0275cmp=S({type:l,selectors:[["app-otp-device-stat"]],standalone:!1,decls:38,vars:21,consts:[[1,"container-fluid","vh-100"],[1,"py-4","d-flex","flex-column"],[1,"mb-4"],[1,"fw-bold","text-muted"],[1,"bi","bi-credit-card"],[1,"row","g-3"],[1,"col-md-4"],["title","Total Cards","iconClass","bi-credit-card",3,"value"],["title","Created Cards","iconClass","bi-credit-card",3,"value"],["title","Registered Cards","iconClass","bi-credit-card",3,"value"],["title","Enrolled Cards","iconClass","bi-credit-card",3,"value"],["title","Active Cards","iconClass","bi-credit-card",3,"value"],["title","Inactive Cards","iconClass","bi-credit-card",3,"value"],[1,"bi",3,"innerHTML"],["title","Total Tokens","iconClass","bi-people-fill",3,"value","svgIcon"],["title","Created Tokens","iconClass","bi-credit-card-2-front-fill",3,"value","svgIcon"],["title","Registered Tokens","iconClass","bi-phone-vibrate-fill",3,"value","svgIcon"],["title","Enrolled Tokens","iconClass","bi-person-lines-fill",3,"value","svgIcon"],["title","Active Tokens","iconClass","bi-arrow-repeat",3,"value","svgIcon"],["title","Inactive Tokens","iconClass","bi-shield-lock-fill",3,"value","svgIcon"]],template:function(t,e){t&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h4",3),p(4,"i",4),s(5," Card Stats"),i()(),n(6,"div",5)(7,"div",6),p(8,"app-stat-card",7),i(),n(9,"div",6),p(10,"app-stat-card",8),i(),n(11,"div",6),p(12,"app-stat-card",9),i(),n(13,"div",6),p(14,"app-stat-card",10),i(),n(15,"div",6),p(16,"app-stat-card",11),i(),n(17,"div",6),p(18,"app-stat-card",12),i()()(),n(19,"div",1)(20,"div",2)(21,"h4",3),p(22,"span",13),M(23,"otpType"),s(24," Token Stats"),i()(),n(25,"div",5)(26,"div",6),p(27,"app-stat-card",14),i(),n(28,"div",6),p(29,"app-stat-card",15),i(),n(30,"div",6),p(31,"app-stat-card",16),i(),n(32,"div",6),p(33,"app-stat-card",17),i(),n(34,"div",6),p(35,"app-stat-card",18),i(),n(36,"div",6),p(37,"app-stat-card",19),i()()()()),t&2&&(a(8),o("value",e.stats.totalCardCount+""),a(2),o("value",e.stats.rawCardCount+""),a(2),o("value",e.stats.registeredCardCount+""),a(2),o("value",e.stats.enrolledCardCount+""),a(2),o("value",e.stats.activeCardCount+""),a(2),o("value",e.stats.inactiveCardCount+""),a(4),o("innerHTML",W(23,19,3),I),a(5),o("value",e.stats.totalTokenCount+"")("svgIcon",e.tokenIcon),a(2),o("value",e.stats.rawTokenCount+"")("svgIcon",e.tokenIcon),a(2),o("value",e.stats.registeredTokenCount+"")("svgIcon",e.tokenIcon),a(2),o("value",e.stats.enrolledTokenCount+"")("svgIcon",e.tokenIcon),a(2),o("value",e.stats.activeTokenCount+"")("svgIcon",e.tokenIcon),a(2),o("value",e.stats.inactiveTokenCount+"")("svgIcon",e.tokenIcon))},dependencies:[pe,Ge],encapsulation:2})};var ct=[{path:"",component:re,children:[{path:"",component:le},{path:"stats",component:me}]}],Je=class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=Se({type:l});static \u0275inj=ve({providers:[T,y],imports:[Ue,Fe,De.forChild(ct),qe,Le,ne]})};export{Je as OtpSerialKeyModule};
