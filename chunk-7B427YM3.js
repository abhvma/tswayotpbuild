import{a as j,c as L}from"./chunk-UJRL6OBK.js";import{a as T}from"./chunk-4C77SNZT.js";import{$ as R,Lb as A,Qa as I,W as D,ab as q,bb as E,c as k,cb as u,ob as K,pb as P,qb as x,rb as O,u as m,v as S,vb as M,x as d}from"./chunk-RHKCHBCJ.js";import{g as v,h as N}from"./chunk-ENRHZQ2S.js";var F=(o=>(o[o.Created=0]="Created",o[o.Delivered=1]="Delivered",o[o.Assigned=2]="Assigned",o[o.Inactive=3]="Inactive",o[o.Unknown=-1]="Unknown",o))(F||{}),G={otpType:"otptype",bankCode:"bank_cd",branchCode:"branch_cd",sequenceNumber:"seqno",otpKey:"otp_key",createdDate:"create_date",status:"status"},a=class extends E{otpType=2;bankCode="";branchCode="";sequenceNumber=0;otpKey="";createdDate=new T;status=0;constructor(){super(),this._mapper=new P(G)}getSoftDelete(){}getPrimaryKeyName(){return"sequenceNumber"}setCreatedDate(e){this.createdDate=new T(e)}setStatus(e){switch(e){case"0":this.status=0;break;case"1":this.status=1;break;case"2":this.status=2;break;case"3":this.status=3;break;default:this.status=-1}}};v([O("seqno")],a.prototype,"sequenceNumber",2),a=v([x("keymst")],a);var l=class r extends K{constructor(e){super(e,a)}getName(){return"serialkey"}generateKey(e){return this.http.post(this.url(),e,{headers:{service:"OTPSVR"}})}getAssignableKeys(){return this.get([{status:u(1)}]).then(e=>e.sort((t,i)=>t.sequenceNumber-i.sequenceNumber))}getFreshKeys(){return this.get([{status:u(1)}]).then(e=>e.sort((t,i)=>t.sequenceNumber-i.sequenceNumber))}getAssignedKeys(e){return e||(e=[]),this.get([{status:u(2)}]).then(t=>t.sort((i,b)=>i.sequenceNumber-b.sequenceNumber))}static \u0275fac=function(t){return new(t||r)(d(M))};static \u0275prov=m({token:r,factory:r.\u0275fac})};var f=class{constructor(e){this.closeFn=e}_closed=new k;closed=this._closed.asObservable();close(e){this._closed.next(e),this._closed.complete(),this.closeFn(e)}};var y=class r{constructor(e){this.appRef=e}getOptions(e){return{clickToClose:e?.clickToClose??!0,className:e?.className??"",width:e?.width??"auto"}}open(e,t,i,b=!0){let{clickToClose:o,className:C}=this.getOptions(i),s=document.createElement("div"),c=document.createElement("div");c.classList.add("modal-dialog"),C&&s.classList.add(...C.split(" ")),i?.width&&(c.style.width=i.width),s.appendChild(c),s.classList.add("dialog-wrapper","tsway-modal","fade-in");let g=()=>N(this,null,function*(){s.classList.remove("fade-in"),yield this.delay(50),s.classList.add("fade-out"),yield this.delay(300),this.appRef.detachView(p.hostView),p.destroy(),document.body.removeChild(s),document.removeEventListener("keyup",h)}),h=n=>{n.key==="Escape"&&(g(),document.removeEventListener("keyup",h))};if(document.addEventListener("keyup",h),b){let n=document.createElement("div");n.classList.add("dialog-overlay","position-fixed","top-0","start-0","w-100","h-100","bg-dark","opacity-50"),s.appendChild(n),o&&s.addEventListener("click",V=>{V.target===n&&g()})}document.body.appendChild(s);let p=this.appRef.bootstrap(e,c);if(t)for(let n in t)p.setInput(n,t[n]);let w=new f(g);return p.instance.dialogRef=w,Promise.resolve(w)}delay(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||r)(d(R))};static \u0275prov=m({token:r,factory:r.\u0275fac})};var H=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=D({type:r});static \u0275inj=S({providers:[y,j,l],imports:[A,I,q,L]})};export{y as a,F as b,l as c,H as d};
