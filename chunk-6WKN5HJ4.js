import{a as k}from"./chunk-HVPVQXOI.js";import{a as S,b as d}from"./chunk-QLKXYMQI.js";import{A as f,B as y,D as _,O as c,Qa as R,S as A,V as P,X as M,_ as b,_a as T,ca as h,fa as x,ga as l,ha as a,la as I,ma as p,na as w,t as C,va as m,w as D,wa as v}from"./chunk-24GG73RQ.js";import{g as s}from"./chunk-WR2VUDLS.js";function N(o,e){if(o&1){let t=I();l(0,"button",9),p("click",function(){f(t);let n=w();return y(n.onCancel())}),a()}}function j(o,e){if(o&1){let t=I();l(0,"button",10),p("click",function(){f(t);let n=w();return y(n.onCancel())}),m(1,"Cancel"),a()}}var g=class o{dialogRef;type="info";title="Alert";message="";showCancel=!0;onOk(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=P({type:o,selectors:[["app-alert-dialog"]],inputs:{type:"type",title:"title",message:"message",showCancel:"showCancel"},decls:12,vars:7,consts:[[1,"modal-content"],[1,"tsway-modal-header"],[1,"tsway-modal-title"],["type","button","class","btn-close","aria-label","Close",3,"click",4,"ngIf"],[1,"tsway-modal-body"],[1,"mb-0"],[1,"tsway-modal-footer"],["type","button","class","btn btn-danger text-white me-2",3,"click",4,"ngIf"],["type","button",3,"click"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["type","button",1,"btn","btn-danger","text-white","me-2",3,"click"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"div",1)(2,"h5",2),m(3),a(),b(4,N,1,0,"button",3),a(),l(5,"div",4)(6,"p",5),m(7),a()(),l(8,"div",6),b(9,j,2,0,"button",7),l(10,"button",8),p("click",function(){return i.onOk()}),m(11,"OK"),a()()()),t&2&&(c(3),v(i.title),c(),h("ngIf",i.showCancel),c(3),v(i.message),c(2),h("ngIf",i.showCancel),c(),x("btn btn-",i.type,""))},dependencies:[R],encapsulation:2})};var u=class o{constructor(e){this.dialog=e}show(e,t,i="info",n=!0){return s(this,null,function*(){let r=yield this.dialog.open(g,{title:e,message:t,type:i,showCancel:n},{width:"30%"});return new Promise(O=>{r.closed.subscribe(V=>{O(V)})})})}static \u0275fac=function(t){return new(t||o)(D(d))};static \u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})};var E=class o{models=[];filteredModels=[];paginatedModels=[];modelFilters={};modelService;dialog;alert;toast;router;paginationOption={currentPage:1,pageSize:25,startPage:1,total:0};constructor(e){this.dialog=e.get(d),this.alert=e.get(u),this.toast=e.get(S),this.router=e.get(T)}getFilterParams(){return[]}loadModels(){let e=new k;return e.show(),this.modelService.get(this.getFilterParams()).then(t=>(e.hide(),this.models=t,this.models)).catch(t=>[]).finally(()=>e.hide())}ngOnInit(){}addModel(){return s(this,null,function*(){yield this.openDialog()})}updateModel(t){return s(this,arguments,function*({model:e}){this.openDialog(e)})}deleteModel(t){return s(this,arguments,function*({model:e}){(yield this.alert.show("Delete Item","Are you sure you want to delete this item?","danger"))&&this.modelService.delete(e).then(n=>{for(let r=0;r<this.models.length;r++)if(this.models[r][this.models[r].getPrimaryKeyName()]===e[e.getPrimaryKeyName()]){this.models.splice(r,1);break}this.toast.success("Item deleted successfully."),this.applyFilters()})})}onFilterChange(e){this.modelFilters=e,this.applyFilters()}static \u0275fac=function(t){return new(t||o)(A(_))};static \u0275dir=M({type:o})};export{u as a,E as b};
