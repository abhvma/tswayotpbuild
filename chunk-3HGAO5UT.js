import{Aa as E,B as p,C as m,Cb as F,F as y,Fa as w,Fb as D,Ga as x,Hb as V,N as O,O as a,Sa as N,Ta as I,V as P,Y as b,_,ba as o,ca as k,fa as l,ga as s,ha as u,ka as v,la as f,ma as c,ua as d,va as g,ya as A,za as K}from"./chunk-PTWT3WXO.js";var S=class r{transform(t){let e=t.slice(0,3),i=t.slice(t.length-4,t.length-1);return e+"*".repeat(10)+i}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=b({name:"keySecret",type:r,pure:!0,standalone:!1})};var C=class r{transform(t,...e){let i="",n="";switch(t){case 2:i="bi-credit-card",n="Card";break;case 3:i="bi-safe",n="Token";break;default:i="bi-exclamation",n="Invalid";break}return`<span class=''><i class="bi ${i} me-1"></i></span>`}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=b({name:"serialKeyType",type:r,pure:!0,standalone:!1})};var M=class r{transform(t,...e){let i="",n="";switch(t){case 0:i="bg-info",n="Created";break;case 1:i="bg-warning",n="Manufacturing";break;case 2:i="bg-success",n="Delivered";break;case 3:i="bg-primary",n="Assigned";break;case 4:i="bg-secondary",n="Inactive";break;case-1:i="badge-error",n="Unknown";break}return`<span class='badge badge-pill ${i}'>${n}</span>`}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=b({name:"serialNumberStatus",type:r,pure:!0,standalone:!1})};function j(r,t){if(r&1){let e=v();l(0,"div",4)(1,"div",5)(2,"input",6),E("ngModelChange",function(n){p(e);let h=c();return K(h.selectAllChecked,n)||(h.selectAllChecked=n),m(n)}),f("change",function(){p(e);let n=c();return m(n.onSelectAll())}),s(),l(3,"label",7),d(4,"Select All"),s()(),l(5,"div",8)(6,"button",9),f("click",function(){p(e);let n=c();return m(n.sendForManufacturing())}),u(7,"i",10),d(8," Send for Manufacturing "),s(),l(9,"button",11),f("click",function(){p(e);let n=c();return m(n.markAsDelivered())}),u(10,"i",12),d(11," Mark as Delivered "),s()()()}if(r&2){let e=c();a(2),A("ngModel",e.selectAllChecked),a(4),o("disabled",!e.hasSelection()),a(3),o("disabled",!e.hasSelection())}}function z(r,t){if(r&1&&(l(0,"th",13),d(1),s()),r&2){let e=t.$implicit;o("width",e.width),a(),g(e.label)}}function $(r,t){if(r&1){let e=v();l(0,"tr",14),f("click",function(){let n=p(e).$implicit,h=c();return m(h.onRowSelect(n))}),u(1,"td",15),w(2,"serialKeyType"),l(3,"td",13),d(4),s(),l(5,"td",13),d(6),w(7,"keySecret"),s(),l(8,"td",13),d(9),s(),u(10,"td",16),w(11,"serialNumberStatus"),s()}if(r&2){let e=t.$implicit,i=c();k("selected",i.isSelected(e)),a(),o("innerHTML",x(2,12,e.otpType),O)("width",i.columns[0].width),a(2),o("width",i.columns[1].width),a(),g(e.sequenceNumber.toString().padStart(6,"0")),a(),o("width",i.columns[2].width),a(),g(x(7,14,e.otpKey)),a(2),o("width",i.columns[3].width),a(),g(e.createdDate.date()),a(),o("width",i.columns[4].width)("innerHTML",x(11,16,e.status),O)}}var q=class r{models=[];showActionBar=!0;rowSelect=new y;fixedHeader=!1;sendForManufacturingAction=new y;markAsDeliveredAction=new y;selectedModels={};columns=[{label:"Type",width:"5%"},{label:"Sequence Number",width:"20%"},{label:"Key",width:"40%"},{label:"Created Date",width:"20%"},{label:"Status",width:"10%"}];selectAllChecked=!1;onRowSelect(t){this.selectedModels[t.sequenceNumber]=!this.selectedModels[t.sequenceNumber],this.rowSelect.emit(t)}onRowToggle(t){this.selectedModels[t.sequenceNumber]=!this.selectedModels[t.sequenceNumber],this.selectAllChecked=this.models.length>0&&this.models.every(e=>this.selectedModels[e.sequenceNumber])}onSelectAll(){this.models.forEach(t=>this.selectedModels[t.sequenceNumber]=this.selectAllChecked)}isSelected(t){return!!this.selectedModels[t.sequenceNumber]}hasSelection(){return Object.values(this.selectedModels).some(t=>t===!0)}sendForManufacturing(){let t=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.sendForManufacturingAction.emit(t)}markAsDelivered(){let t=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.markAsDeliveredAction.emit(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=P({type:r,selectors:[["app-otp-serial-key-table"]],inputs:{models:"models",showActionBar:"showActionBar",fixedHeader:"fixedHeader"},outputs:{rowSelect:"rowSelect",sendForManufacturingAction:"sendForManufacturingAction",markAsDeliveredAction:"markAsDeliveredAction"},standalone:!1,decls:7,vars:5,consts:[["class","d-flex justify-content-between align-items-center mb-3 p-2 action-bar",4,"ngIf"],[1,"tsway-datatable","striped"],[3,"width",4,"ngFor","ngForOf"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-3","p-2","action-bar"],[1,"d-flex","align-items-center","gap-2"],["id","selectAll","type","checkbox",3,"ngModelChange","change","ngModel"],["role","button","for","selectAll",1,"mb-0"],[1,"d-flex","gap-2"],[1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-gear-fill","me-1"],[1,"btn","btn-success",3,"click","disabled"],[1,"bi","bi-check-circle-fill","me-1"],[3,"width"],[3,"click"],[3,"innerHTML","width"],[3,"width","innerHTML"]],template:function(e,i){e&1&&(_(0,j,12,3,"div",0),l(1,"table",1)(2,"thead")(3,"tr"),_(4,z,2,2,"th",2),s()(),l(5,"tbody"),_(6,$,12,18,"tr",3),s()()),e&2&&(o("ngIf",i.showActionBar),a(),k("fixed-header",i.fixedHeader),a(3),o("ngForOf",i.columns),a(2),o("ngForOf",i.models))},dependencies:[F,D,N,I,V,S,C,M],styles:['@charset "UTF-8";table.fixed-header[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;height:100%;overflow-y:auto}table.fixed-header[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#8adbff}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px 16px;border:1px solid #f3f3f3;border-radius:8px}.action-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-left:6px}.btn-action[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;background:#007bff;color:#fff}.btn-action[_ngcontent-%COMP%]:hover:enabled{background:#0056b3}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-action.success[_ngcontent-%COMP%]{background:#28a745}.btn-action.success[_ngcontent-%COMP%]:hover:enabled{background:#1e7e34}tr.selected[_ngcontent-%COMP%]{background-color:#7db9de!important;border-bottom:1px solid #ffffff;color:#fff}']})};export{S as a,q as b};
