import{Hb as M,Oa as j,V as L,_ as v,_a as I,c as f,t as h,u as C,w as p,y as E}from"./chunk-GNQKHW6I.js";import{h as R}from"./chunk-ENRHZQ2S.js";var T=class{constructor(e){this.closeFn=e}_closed=new f;closed=this._closed.asObservable();close(e){this._closed.next(e),this._closed.complete(),this.closeFn(e)}};var g=class o{constructor(e){this.appRef=e}getOptions(e){return{clickToClose:e?.clickToClose??!0,className:e?.className??"",width:e?.width??"auto"}}open(e,t,a){let{clickToClose:y,className:c}=this.getOptions(a),s=document.createElement("div"),l=document.createElement("div");l.classList.add("modal-dialog"),c&&s.classList.add(...c.split(" ")),a?.width&&(l.style.width=a.width),s.appendChild(l),s.classList.add("dialog-wrapper","tsway-modal","fade-in");let i=()=>R(this,null,function*(){s.classList.remove("fade-in"),yield this.delay(50),s.classList.add("fade-out"),yield this.delay(300),this.appRef.detachView(u.hostView),u.destroy(),document.body.removeChild(s),document.removeEventListener("keyup",n)}),n=d=>{d.key==="Escape"&&(i(),document.removeEventListener("keyup",n))};document.addEventListener("keyup",n);let r=document.createElement("div");r.classList.add("dialog-overlay","position-fixed","top-0","start-0","w-100","h-100","bg-dark","opacity-50"),s.appendChild(r),document.body.appendChild(s),y&&s.addEventListener("click",d=>{d.target===r&&i()});let u=this.appRef.bootstrap(e,l);if(t)for(let d in t)u.setInput(d,t[d]);let b=new T(i);return u.instance.dialogRef=b,Promise.resolve(b)}delay(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||o)(p(v))};static \u0275prov=h({token:o,factory:o.\u0275fac})};var m=class{constructor(e){this.closeFn=e}closed=new f;close(e){this.closeFn(),this.closed.next(e),this.closed.complete()}};var w=class o{constructor(e,t){this.appRef=e;this.envInjector=t}containerMap=new Map;show(e,t,a={}){let y=a.position||"top|right";t=t||"default";let c=a.hideCloseButton??!1,s=a.duration??1e4,l=this.getOrCreateContainer(y),i=document.createElement("div");i.classList.add("toast-wrapper",`toast-${t}`),c&&i.classList.add("hide-close"),l.prepend(i);let n;if(typeof e=="string")i.innerHTML=`
        <div class="toast-content">${e}</div>
        ${c?"":'<button class="toast-close">&times;</button>'}
      `,n=new m(()=>{this.fadeAndRemove(i)}),c||i.querySelector(".toast-close")?.addEventListener("click",()=>n.close(null));else{let r=this.appRef.bootstrap(e,i);a.params&&Object.assign(r.instance,a.params),n=new m(()=>{this.fadeAndRemove(i),this.appRef.detachView(r.hostView),r.destroy()}),r.instance.toastRef=n}return setTimeout(()=>n.close(null),s),n}success(e,t={}){this.show(e,"success",t)}error(e,t={}){this.show(e,"error",t)}info(e,t={}){this.show(e,"info",t)}warning(e,t={}){this.show(e,"warning",t)}getOrCreateContainer(e){if(this.containerMap.has(e))return this.containerMap.get(e);let t=document.createElement("div");return t.classList.add("toast-container",...e.split("|").map(a=>a.trim())),document.body.appendChild(t),this.containerMap.set(e,t),t}fadeAndRemove(e){e.classList.add("fade-out"),setTimeout(()=>e.remove(),300)}static \u0275fac=function(t){return new(t||o)(p(v),p(E))};static \u0275prov=h({token:o,factory:o.\u0275fac})};var P=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=L({type:o});static \u0275inj=C({providers:[g,w],imports:[M,j,I]})};export{w as a,g as b,P as c};
