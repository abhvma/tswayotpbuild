import{b as O,c as j,d as R,i as A,j as G,m as L,s as Q,v as X}from"./chunk-OAX3GI2W.js";import{c as B,d as H,e as D,f as V,g as K,h as $,i as z,j as J,p as U,q as W,t as Y}from"./chunk-QJQLHX4L.js";import{$ as N,E,F as f,Oa as q,P as a,Qa as k,T,W as s,X as w,_ as M,da as m,eb as P,ha as n,ia as o,ja as b,na as u,u as S,v as _,wa as i,x,xa as g}from"./chunk-HUFZ2J5X.js";import{f as y}from"./chunk-WR2VUDLS.js";var te={traceDate:"trace_date",traceSequence:"trace_seq",terminalIp:"terminal_ip",sqlText:"sql_txt"},c=class extends O{traceDate="";traceSequence="";terminalIp="";sqlText="";constructor(){super(),this._mapper=new j(te)}getPrimaryKeyName(){return""}getSoftDelete(){}};c=y([R("trlog")],c);var p=class r extends Q{constructor(t){super(t,c)}getName(){return"transtactions"}static \u0275fac=function(e){return new(e||r)(x(B))};static \u0275prov=S({token:r,factory:r.\u0275fac})};function oe(r,t){if(r&1&&(n(0,"tr")(1,"td"),i(2),o(),n(3,"td"),i(4),o(),n(5,"td"),i(6),o(),n(7,"td"),i(8),o()()),r&2){let e=t.$implicit;a(2),g(e.traceSequence),a(2),g(e.terminalIp),a(2),g(e.sqlText),a(2),g(e.traceDate)}}var v=class r{models=[];editClick=new f;deleteClick=new f;columns=["Trace Sequence","Terminal IP","SQL Text","Trace Date"];static \u0275fac=function(e){return new(e||r)};static \u0275cmp=s({type:r,selectors:[["app-transaction-log-table"]],inputs:{models:"models"},outputs:{editClick:"editClick",deleteClick:"deleteClick"},standalone:!1,decls:14,vars:1,consts:[[1,"container-fluid","shadow","rounded-3","border"],[1,"table","table-striped","table-hover"],["scope","col","width","15%"],["scope","col","width","50%"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),i(5,"Trace Sequence"),o(),n(6,"th",2),i(7,"Terminal IP"),o(),n(8,"th",3),i(9,"SQL Text"),o(),n(10,"th",4),i(11,"Trace Date"),o()()(),n(12,"tbody"),N(13,oe,9,4,"tr",5),o()()()),e&2&&(a(13),m("ngForOf",l.models))},dependencies:[q],encapsulation:2})};var h=class r{constructor(t){this.fb=t;this.filterForm=this.fb.group({traceDateTo:["",D.required],traceDateFrom:["",D.required],terminalIp:""})}filterChange=new f;filterForm;subscriptions=[];emitFilter(){this.filterChange.emit(this.filterForm.value)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||r)(T(U))};static \u0275cmp=s({type:r,selectors:[["app-transaction-log-filterbar"]],outputs:{filterChange:"filterChange"},standalone:!1,decls:14,vars:2,consts:[[1,"mb-3"],[1,"row","g-2","align-items-end","filter-form-container",3,"formGroup"],[1,"col-md-2"],["for","traceDateFrom",1,"form-label","small","mb-1"],["type","date","id","traceDateFrom","formControlName","traceDateFrom",1,"form-control"],["for","traceDateTo",1,"form-label","small","mb-1"],["type","date","id","traceDateTo","formControlName","traceDateTo",1,"form-control"],["type","button",1,"btn","btn-custom-primary",3,"click","disabled"],[1,"bi","bi-funnel-fill","me-1"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),i(4,"Trace From"),o(),b(5,"input",4),o(),n(6,"div",2)(7,"label",5),i(8,"Trace To"),o(),b(9,"input",6),o(),n(10,"div",2)(11,"button",7),u("click",function(){return l.emitFilter()}),b(12,"i",8),i(13,"Search "),o()()()()),e&2&&(a(),m("formGroup",l.filterForm),a(10),m("disabled",l.filterForm.invalid))},dependencies:[$,H,V,K,z,J],encapsulation:2})};var F=class r extends X{currentPage=0;itemLimit=100;constructor(t){super(t),this.modelService=t.get(p)}ngOnInit(){}loadModels(){let t=[];return this.modelFilters.traceDateFrom&&t.push({traceDate:A(new L(this.modelFilters.traceDateFrom))}),this.modelFilters.traceDateTo&&t.push({traceDate:G(new L(this.modelFilters.traceDateTo))}),this.modelService.paginate(t,{traceDate:"DESC"},this.currentPage,this.itemLimit).then(e=>(this.models=e,this.models)).catch(e=>(this.toast.error("Failed to load transaction logs"),[]))}openDialog(t){throw new Error("Method not implemented.")}applyFilters(){throw new Error("Method not implemented.")}onFilterChange(t){this.modelFilters=t,this.loadModels()}static \u0275fac=function(e){return new(e||r)(T(E))};static \u0275cmp=s({type:r,selectors:[["app-transaction-log"]],standalone:!1,features:[M],decls:7,vars:1,consts:[[1,"container-fluid","py-4","d-flex","flex-column","vh-100"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[3,"filterChange"],[1,"flex-grow-1","overflow-auto"],[3,"editClick","deleteClick","models"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Transaction Logs"),o()(),n(4,"app-transaction-log-filterbar",3),u("filterChange",function(d){return l.onFilterChange(d)}),o(),n(5,"div",4)(6,"app-transaction-log-table",5),u("editClick",function(d){return l.updateModel(d)})("deleteClick",function(d){return l.deleteModel(d)}),o()()()),e&2&&(a(6),m("models",l.models))},dependencies:[v,h],encapsulation:2})};var ie=[{path:"",component:F}],ee=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=w({type:r});static \u0275inj=_({providers:[p],imports:[Y,k,P.forChild(ie),W]})};export{ee as TransactionLogModule};
