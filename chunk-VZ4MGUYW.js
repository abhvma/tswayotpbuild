import{a as F}from"./chunk-HVPVQXOI.js";import{a as d}from"./chunk-CQZ4ATFG.js";import{B as R,Bb as E,C as M,Da as T,E as S,Fa as O,H as h,L as b,O as x,P as a,Q as l,U as I,V as m,W as v,ca as p,da as w,j as _,m as A,q as f,r as y,s as P,xa as k,y as c}from"./chunk-3IBPSVRT.js";import{a as C,b as D,h as s}from"./chunk-ENRHZQ2S.js";function z(i,e){if(i&1){let t=I();a(0,"button",9),m("click",function(){f(t);let n=v();return y(n.onCancel())}),l()}}function Q(i,e){if(i&1){let t=I();a(0,"button",10),m("click",function(){f(t);let n=v();return y(n.onCancel())}),p(1,"Cancel"),l()}}var g=class i{dialogRef;type="info";title="Alert";message="";showCancel=!0;onOk(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-alert-dialog"]],inputs:{type:"type",title:"title",message:"message",showCancel:"showCancel"},decls:12,vars:7,consts:[[1,"modal-content"],[1,"tsway-modal-header"],[1,"tsway-modal-title"],["type","button","class","btn-close","aria-label","Close",3,"click",4,"ngIf"],[1,"tsway-modal-body"],[1,"mb-0"],[1,"tsway-modal-footer"],["type","button","class","btn btn-danger text-white me-2",3,"click",4,"ngIf"],["type","button",3,"click"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["type","button",1,"btn","btn-danger","text-white","me-2",3,"click"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"h5",2),p(3),l(),h(4,z,1,0,"button",3),l(),a(5,"div",4)(6,"p",5),p(7),l()(),a(8,"div",6),h(9,Q,2,0,"button",7),a(10,"button",8),m("click",function(){return o.onOk()}),p(11,"OK"),l()()()),t&2&&(c(3),w(o.title),c(),b("ngIf",o.showCancel),c(3),w(o.message),c(2),b("ngIf",o.showCancel),c(),x("btn btn-",o.type,""))},dependencies:[k],encapsulation:2})};var u=class i{constructor(e){this.dialog=e}show(e,t,o="info",n=!0){return s(this,null,function*(){let r=yield this.dialog.open(g,{title:e,message:t,type:o,showCancel:n},{width:"30%"});return new Promise(j=>{r.closed.subscribe(K=>{j(K)})})})}static \u0275fac=function(t){return new(t||i)(A(d))};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var N=class i{models=[];filteredModels=[];paginatedModels=[];modelFilters={};modelService;dialog;alert;toast;router;activatedRoute;paginationOption={currentPage:0,pageSize:200,startPage:0,total:0};constructor(e){this.dialog=e.get(d),this.alert=e.get(u),this.toast=e.get(E),this.router=e.get(O),this.activatedRoute=e.get(T)}getFilterParams(){return[]}getOrder(){return{}}loadModels(e=!1){let t=new F;t.show();let o=e?this.modelService.paginate(this.getFilterParams(),this.getOrder(),this.paginationOption.currentPage,this.paginationOption.pageSize):this.modelService.get(this.getFilterParams(),this.getOrder());return o.then(n=>(t.hide(),this.models=n,this.models)).catch(n=>[]).finally(()=>t.hide()),o}ngOnInit(){}addModel(){return s(this,null,function*(){yield this.openDialog()})}updateModel(t){return s(this,arguments,function*({model:e}){this.openDialog(e)})}deleteModel(t){return s(this,arguments,function*({model:e}){(yield this.alert.show("Delete Item","Are you sure you want to delete this item?","primary"))&&this.modelService.delete(e).then(n=>{for(let r=0;r<this.models.length;r++)if(this.models[r][this.models[r].getPrimaryKeyName()]===e[e.getPrimaryKeyName()]){this.models.splice(r,1);break}this.toast.success("Item deleted successfully."),this.applyFilters()})})}onFilterChange(e){this.paginationOption=D(C({},this.paginationOption),{startPage:0,currentPage:0}),this.modelFilters=e,this.applyFilters()}static \u0275fac=function(t){return new(t||i)(R(P))};static \u0275dir=S({type:i})};export{u as a,N as b};
