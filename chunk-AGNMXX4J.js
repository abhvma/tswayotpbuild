import{Aa as I,B as p,C as m,Eb as F,F as y,Fa as x,Ga as w,Hb as V,Jb as D,N as M,O as r,Sa as E,Ta as N,V as P,Y as u,_ as f,ba as a,ca as v,fa as s,ga as c,ha as b,ka as k,la as g,ma as l,ua as d,va as h,ya as A,za as K}from"./chunk-Y6X5IISN.js";var C=class n{transform(i){let e=i.slice(0,3),t=i.slice(i.length-4,i.length-1);return e+"*".repeat(10)+t}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=u({name:"keySecret",type:n,pure:!0,standalone:!1})};var S=class n{transform(i,...e){let t="",o="";switch(i){case 2:t="bi-credit-card",o="Card";break;case 3:t="bi-safe",o="Token";break;default:t="bi-exclamation",o="Invalid";break}return`<span class=''><i class="bi ${t} me-1"></i></span>`}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=u({name:"serialKeyType",type:n,pure:!0,standalone:!1})};var O=class n{transform(i,...e){let t="",o="";switch(i){case 0:t="bg-info",o="Created";break;case 1:t="bg-warning",o="Manufacturing";break;case 2:t="bg-success",o="Received";break;case 3:t="bg-primary",o="Assigned";break;case 4:t="bg-secondary",o="Inactive";break;case-1:t="badge-error",o="Unknown";break}return`<span class='badge badge-pill ${t}'>${o}</span>`}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=u({name:"serialNumberStatus",type:n,pure:!0,standalone:!1})};function $(n,i){if(n&1){let e=k();s(0,"div",4)(1,"div",5)(2,"input",6),I("ngModelChange",function(o){p(e);let _=l();return K(_.selectAllChecked,o)||(_.selectAllChecked=o),m(o)}),g("change",function(){p(e);let o=l();return m(o.onSelectAll())}),c(),s(3,"label",7),d(4,"Select All"),c()(),s(5,"div",5)(6,"div",8)(7,"button",9),g("click",function(){p(e);let o=l();return m(o.sendForManufacturing())}),b(8,"i",10),d(9," Manufacturing "),c(),s(10,"button",9),g("click",function(){p(e);let o=l();return m(o.markAsDelivered())}),b(11,"i",11),d(12," Received "),c()()()()}if(n&2){let e=l();r(2),A("ngModel",e.selectAllChecked),r(5),a("disabled",!e.hasSelection()),r(3),a("disabled",!e.hasSelection())}}function R(n,i){if(n&1&&(s(0,"th",12),d(1),c()),n&2){let e=i.$implicit;a("width",e.width),r(),h(e.label)}}function j(n,i){if(n&1&&(b(0,"td",17),x(1,"serialKeyType")),n&2){let e=l().$implicit,t=l();a("innerHTML",w(1,2,e.otpType),M)("width",t.columns[0].width)}}function z(n,i){if(n&1&&(s(0,"td",12),d(1),c()),n&2){let e=l().$implicit,t=l();a("width",t.columns[1].width),r(),h(e.sequenceNumber.toString().padStart(6,"0"))}}function U(n,i){if(n&1&&(b(0,"td",18),x(1,"serialNumberStatus")),n&2){let e=l().$implicit,t=l();a("width",t.columns[4].width)("innerHTML",w(1,2,e.status),M)}}function W(n,i){if(n&1){let e=k();s(0,"tr",13),g("click",function(){let o=p(e).$implicit,_=l();return m(_.onRowSelect(o))}),f(1,j,2,4,"td",14)(2,z,2,2,"td",15),s(3,"td",12),d(4),x(5,"keySecret"),c(),s(6,"td",12),d(7),c(),f(8,U,2,4,"td",16),c()}if(n&2){let e=i.$implicit,t=l();v("selected",t.isSelected(e)),r(),a("ngIf",!t.selection),r(),a("ngIf",!t.selection),r(),a("width",t.columns[t.selection?0:2].width),r(),h(w(5,9,e.otpKey)),r(2),a("width",t.columns[t.selection?1:3].width),r(),h(e.createdDate.date()),r(),a("ngIf",!t.selection)}}var H=class n{selection=!1;models=[];showActionBar=!0;rowSelect=new y;fixedHeader=!1;sendForManufacturingAction=new y;markAsDeliveredAction=new y;selectedModels={};columns=[];selectAllChecked=!1;constructor(){}ngOnInit(){this.columns=[{label:"Key",width:"40%"},{label:"Created Date",width:"20%"}],this.selection||(this.columns.unshift({label:"Sequence Number",width:"20%"}),this.columns.unshift({label:"Type",width:"5%"}),this.columns.push({label:"Status",width:"10%"}))}onRowSelect(i){this.selectedModels[i.sequenceNumber]=!this.selectedModels[i.sequenceNumber],this.rowSelect.emit(i)}onRowToggle(i){this.selectedModels[i.sequenceNumber]=!this.selectedModels[i.sequenceNumber],this.selectAllChecked=this.models.length>0&&this.models.every(e=>this.selectedModels[e.sequenceNumber])}onSelectAll(){this.models.forEach(i=>this.selectedModels[i.sequenceNumber]=this.selectAllChecked)}isSelected(i){return!!this.selectedModels[i.sequenceNumber]}hasSelection(){return Object.values(this.selectedModels).some(i=>i===!0)}sendForManufacturing(){let i=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.sendForManufacturingAction.emit(i)}markAsDelivered(){let i=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.markAsDeliveredAction.emit(i)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-otp-serial-key-table"]],inputs:{selection:"selection",models:"models",showActionBar:"showActionBar",fixedHeader:"fixedHeader"},outputs:{rowSelect:"rowSelect",sendForManufacturingAction:"sendForManufacturingAction",markAsDeliveredAction:"markAsDeliveredAction"},standalone:!1,decls:7,vars:5,consts:[["class","d-flex justify-content-between align-items-center mb-2 p-2 toolbar",4,"ngIf"],[1,"tsway-datatable","striped"],[3,"width",4,"ngFor","ngForOf"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-2","p-2","toolbar"],[1,"d-flex","align-items-center","gap-2"],["id","selectAll","type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["role","button","for","selectAll",1,"mb-0"],["role","group","aria-label","Primary Actions",1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-secondary","d-flex","align-items-center",3,"click","disabled"],[1,"bi","bi-gear-fill","me-1"],[1,"bi","bi-check-circle-fill","me-1"],[3,"width"],[3,"click"],[3,"innerHTML","width",4,"ngIf"],[3,"width",4,"ngIf"],[3,"width","innerHTML",4,"ngIf"],[3,"innerHTML","width"],[3,"width","innerHTML"]],template:function(e,t){e&1&&(f(0,$,13,3,"div",0),s(1,"table",1)(2,"thead")(3,"tr"),f(4,R,2,2,"th",2),c()(),s(5,"tbody"),f(6,W,9,11,"tr",3),c()()),e&2&&(a("ngIf",t.showActionBar),r(),v("fixed-header",t.fixedHeader),r(3),a("ngForOf",t.columns),r(2),a("ngForOf",t.models))},dependencies:[F,V,E,N,D,C,S,O],styles:['@charset "UTF-8";table.fixed-header[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;height:100%;overflow-y:auto}table.fixed-header[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#8adbff}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px 16px;border:1px solid #f3f3f3;border-radius:8px}.action-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-left:6px}.btn-action[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;background:#007bff;color:#fff}.btn-action[_ngcontent-%COMP%]:hover:enabled{background:#0056b3}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-action.success[_ngcontent-%COMP%]{background:#28a745}.btn-action.success[_ngcontent-%COMP%]:hover:enabled{background:#1e7e34}tr.selected[_ngcontent-%COMP%]{background-color:#7db9de!important;border-bottom:1px solid #ffffff;color:#fff}']})};export{C as a,H as b};
