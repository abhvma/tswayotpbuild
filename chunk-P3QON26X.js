import{b as m}from"./chunk-CQZ4ATFG.js";import{Ja as y,Ta as g,Va as v,_a as f,ab as h,bb as E,cb as b,db as T,eb as u,hb as C,j as d,m as l}from"./chunk-3IBPSVRT.js";import{g as c}from"./chunk-ENRHZQ2S.js";var p=class{name="";payload;listeners=[];constructor(e){this.payload=e}addListener(e){this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t!==-1&&this.listeners.splice(t,1)}notifyListeners(){for(let e of this.listeners)e(this.payload)}};var I=class extends p{name="CustomerKeyAssignedEvent";constructor(e){super(e)}},x=class extends p{name="CustomerKeyRetryClearEvent";constructor(e){super(e)}},K=class extends p{name="CustomerKeyLostEvent";constructor(e){super(e)}},P=class extends p{name="CustomerKeyReassignedEvent";constructor(e){super(e)}};var D=class o{events=new Map;registerEventListener(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e)?.push(t)}unregisterEventListener(e,t){let r=this.events.get(e);if(r&&r.length>0){for(let s=0;s<r.length;s++)if(r[s]===t){r.splice(s,1);break}}}fireEvent(e){let t=e.constructor,r=this.events.get(t);if(r&&r.length>0)for(let s of r)s(e.payload)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=d({token:o,factory:o.\u0275fac,providedIn:"root"})};var q={customerId:"custom_id",traceDate:"trace_date",sequenceNumber:"seq",status:"status",branchCode:"branch_cd",serialNumber:"serial_num",otpKey:"otp_key"},i=class extends y{customerId="";traceDate=new m;sequenceNumber=0;status=1;branchCode="";serialNumber="";otpKey="";constructor(){super(),this._mapper=new E(q)}getPrimaryKeyName(){return"customerId"}getSoftDelete(){}setTraceDate(e){this.traceDate=new m(e)}setStatus(e){this.status=Number(e)}};c([u()],i.prototype,"traceDate",2),c([T("seq"),u()],i.prototype,"sequenceNumber",2),i=c([b("cifhst")],i);var L=class o extends h{constructor(e){super(e,i)}getName(){return"serialkeyhistory"}createLog(e,t,r,s,n,N){let a=new i;if(a.customerId=t.customerId,a.otpKey=n,a.branchCode=N,r===1)a.serialNumber=s;else{let w=f(s,!1);a.serialNumber=w.sequenceNumber+""}a.status=e,a.traceDate=new m;let R=this.getQueryBuilder().insert(a).buildParameterized();return this.http.post(g.api,v(R)).then()}logKeyAssign(e,t,r,s,n){return this.createLog(1,e,t,r,s,n)}logKeyReAssign(e,t,r,s,n){return this.createLog(4,e,t,r,s,n)}logKeyLost(e,t,r,s,n){return this.createLog(3,e,t,r,s,n)}logKeyRetryClear(e,t,r,s,n){return this.createLog(2,e,t,r,s,n)}static \u0275fac=function(t){return new(t||o)(l(C))};static \u0275prov=d({token:o,factory:o.\u0275fac,providedIn:"root"})};export{I as a,x as b,K as c,P as d,D as e,L as f};
