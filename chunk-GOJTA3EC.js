import{A as P,Aa as D,B as m,C as f,Eb as q,F as x,Fa as _,Ga as w,Hb as V,Jb as R,N as k,O as r,S as A,Sa as N,Ta as F,V as K,Y as u,_ as b,_a as H,ba as l,ca as O,fa as s,ga as c,ha as h,ka as M,la as g,ma as a,ua as d,va as p,ya as E,za as I}from"./chunk-Y6X5IISN.js";var S=class n{transform(t){let e=t.slice(0,3),i=t.slice(t.length-4,t.length-1);return e+"*".repeat(10)+i}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=u({name:"keySecret",type:n,pure:!0,standalone:!1})};var j=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 128 48"
  width="48"
  height="18"
  style="
    --otp-body: #ffffff;
    --otp-screen: #b3b3b3;
    --otp-button: #ffffff;
    --otp-stroke: #000000;
  "
>
  <rect x="4" y="6" width="120" height="36" rx="18"
        fill="var(--otp-body)" stroke="var(--otp-stroke)" stroke-width="1"/>

  <circle cx="14" cy="24" r="6" fill="none" stroke="var(--otp-stroke)" stroke-width="2" opacity=".6"/>
  <circle cx="14" cy="24" r="3.5" fill="none" stroke="var(--otp-stroke)" stroke-width="1" opacity=".4"/>

  <rect x="42" y="14" width="44" height="20" rx="4" fill="#0b1220" opacity=".45"/>
  <rect x="44" y="16" width="40" height="16" rx="3" fill="var(--otp-screen)"/>

  <g opacity=".55">
    <rect x="48" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
    <rect x="60" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
    <rect x="72" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
  </g>

  <circle cx="104" cy="24" r="8" fill="var(--otp-button)" stroke="var(--otp-stroke)" stroke-width="1"/>
  <circle cx="104" cy="24" r="5" fill="#ffffff" opacity=".6"/>
</svg>
`,C=class n{constructor(t){this.sanitizer=t}transform(t){let e;switch(t){case 2:e='<i class="bi bi-credit-card"></i>';break;case 3:e=j;break;default:e='<i class="bi bi-exclamation"></i>';break}return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(e){return new(e||n)(A(H,16))};static \u0275pipe=u({name:"serialKeyType",type:n,pure:!0,standalone:!1})};var v=class n{transform(t,...e){let i="",o="";switch(t){case 0:i="bg-info",o="Created";break;case 1:i="bg-warning",o="Registered";break;case 2:i="bg-success",o="Enrolled";break;case 3:i="bg-primary",o="Active";break;case 4:i="bg-secondary",o="Revoked";break;case-1:i="badge-error",o="Unknown";break}return`<span class='badge badge-pill ${i}'>${o}</span>`}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=u({name:"serialNumberStatus",type:n,pure:!0,standalone:!1})};function W(n,t){if(n&1){let e=M();s(0,"div",4)(1,"div",5)(2,"input",6),D("ngModelChange",function(o){m(e);let y=a();return I(y.selectAllChecked,o)||(y.selectAllChecked=o),f(o)}),g("change",function(){m(e);let o=a();return f(o.onSelectAll())}),c(),s(3,"label",7),d(4,"Select All"),c()(),s(5,"div",5)(6,"div",8)(7,"button",9),g("click",function(){m(e);let o=a();return f(o.sendForManufacturing())}),h(8,"i",10),d(9," Registered "),c(),s(10,"button",9),g("click",function(){m(e);let o=a();return f(o.markAsDelivered())}),h(11,"i",11),d(12," Enrolled "),c()()()()}if(n&2){let e=a();r(2),E("ngModel",e.selectAllChecked),r(5),l("disabled",e.getManufacturingDisableState()),r(3),l("disabled",e.getReceivedDisableState())}}function G(n,t){if(n&1&&(s(0,"th",12),d(1),c()),n&2){let e=t.$implicit;l("width",e.width),r(),p(e.label)}}function J(n,t){if(n&1&&(s(0,"td",12),d(1),c()),n&2){let e=a().$implicit,i=a();l("width",i.columns[4].width),r(),p((e.manufacturingDispatchDate==null?null:e.manufacturingDispatchDate.date())||"NA")}}function Q(n,t){if(n&1&&(s(0,"td",12),d(1),c()),n&2){let e=a().$implicit,i=a();l("width",i.columns[5].width),r(),p((e.productDeliveryDate==null?null:e.productDeliveryDate.date())||"NA")}}function X(n,t){if(n&1&&(s(0,"td",12),d(1),c()),n&2){let e=a().$implicit,i=a();l("width",i.columns[6].width),r(),p((e.keyAssignedDate==null?null:e.keyAssignedDate.date())||"NA")}}function Y(n,t){if(n&1&&(h(0,"td",17),_(1,"serialNumberStatus")),n&2){let e=a().$implicit,i=a();l("width",i.columns[7].width)("innerHTML",w(1,2,e.status),k)}}function Z(n,t){if(n&1){let e=M();s(0,"tr",13),g("click",function(){let o=m(e).$implicit,y=a();return f(y.onRowSelect(o))}),h(1,"td",14),_(2,"serialKeyType"),s(3,"td",12),d(4),c(),s(5,"td",12),d(6),_(7,"keySecret"),c(),s(8,"td",12),d(9),c(),b(10,J,2,2,"td",15)(11,Q,2,2,"td",15)(12,X,2,2,"td",15)(13,Y,2,4,"td",16),c()}if(n&2){let e=t.$implicit,i=a();O("selected",i.isSelected(e)),r(),l("innerHTML",w(2,14,e.otpType),k)("width",i.columns[0].width),r(2),l("width",i.columns[1].width),r(),p(e.sequenceNumber.toString().padStart(6,"0")),r(),l("width",i.columns[2].width),r(),p(w(7,16,e.otpKey)),r(2),l("width",i.columns[3].width),r(),p(e.createdDate.date()),r(),l("ngIf",!i.selection),r(),l("ngIf",!i.selection),r(),l("ngIf",!i.selection),r(),l("ngIf",!i.selection)}}var z=class n{selection=!1;models=[];showActionBar=!0;rowSelect=new x;fixedHeader=!1;sendForManufacturingAction=new x;markAsDeliveredAction=new x;selectedModels={};columns=[];selectAllChecked=!1;constructor(){}ngOnInit(){this.columns=[{label:"Type",width:"10%"},{label:"Sequence Number",width:"20%"},{label:"Key",width:"40%"},{label:"Created Date",width:"20%"}],this.selection||(this.columns=[...this.columns,{label:"Registered Date",width:"20%"},{label:"Enrolled Date",width:"20%"},{label:"Active Date",width:"20%"},{label:"Status",width:"10%"}])}ngOnChanges(t){t.models&&(this.selectedModels={},this.selectAllChecked=!1)}onRowSelect(t){this.selectedModels[t.sequenceNumber]?delete this.selectedModels[t.sequenceNumber]:this.selectedModels[t.sequenceNumber]=t,this.rowSelect.emit(t)}onRowToggle(t){this.selectedModels[t.sequenceNumber]?delete this.selectedModels[t.sequenceNumber]:this.selectedModels[t.sequenceNumber]=t,this.selectAllChecked=this.models.length>0&&this.models.every(e=>this.selectedModels[e.sequenceNumber])}onSelectAll(){this.selectedModels={},this.selectAllChecked&&this.models.forEach(t=>{this.selectedModels[t.sequenceNumber]=t})}isSelected(t){return!!this.selectedModels[t.sequenceNumber]}hasSelection(){return Object.values(this.selectedModels).length>0}sendForManufacturing(){let t=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.sendForManufacturingAction.emit(t)}markAsDelivered(){let t=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.markAsDeliveredAction.emit(t)}getManufacturingDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(t=>t.status==0):!0}getReceivedDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(t=>t.status==1):!0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-otp-serial-key-table"]],inputs:{selection:"selection",models:"models",showActionBar:"showActionBar",fixedHeader:"fixedHeader"},outputs:{rowSelect:"rowSelect",sendForManufacturingAction:"sendForManufacturingAction",markAsDeliveredAction:"markAsDeliveredAction"},standalone:!1,features:[P],decls:7,vars:5,consts:[["class","d-flex justify-content-between align-items-center mb-2 p-2 toolbar",4,"ngIf"],[1,"tsway-datatable","striped"],[3,"width",4,"ngFor","ngForOf"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-2","p-2","toolbar"],[1,"d-flex","align-items-center","gap-2"],["id","selectAll","type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["role","button","for","selectAll",1,"mb-0"],["role","group","aria-label","Primary Actions",1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-secondary","d-flex","align-items-center",3,"click","disabled"],[1,"bi","bi-gear-fill","me-1"],[1,"bi","bi-check-circle-fill","me-1"],[3,"width"],[3,"click"],[3,"innerHTML","width"],[3,"width",4,"ngIf"],[3,"width","innerHTML",4,"ngIf"],[3,"width","innerHTML"]],template:function(e,i){e&1&&(b(0,W,13,3,"div",0),s(1,"table",1)(2,"thead")(3,"tr"),b(4,G,2,2,"th",2),c()(),s(5,"tbody"),b(6,Z,14,18,"tr",3),c()()),e&2&&(l("ngIf",i.showActionBar),r(),O("fixed-header",i.fixedHeader),r(3),l("ngForOf",i.columns),r(2),l("ngForOf",i.models))},dependencies:[q,V,N,F,R,S,C,v],styles:['@charset "UTF-8";table.fixed-header[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;height:100%;overflow-y:auto}table.fixed-header[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#8adbff}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px 16px;border:1px solid #f3f3f3;border-radius:8px}.action-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-left:6px}.btn-action[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;background:#007bff;color:#fff}.btn-action[_ngcontent-%COMP%]:hover:enabled{background:#0056b3}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-action.success[_ngcontent-%COMP%]{background:#28a745}.btn-action.success[_ngcontent-%COMP%]:hover:enabled{background:#1e7e34}tr.selected[_ngcontent-%COMP%]{background-color:#7db9de!important;border-bottom:1px solid #ffffff;color:#fff}']})};export{S as a,v as b,z as c};
