import{a as E,b as d}from"./chunk-ZROOOIOL.js";import{a as F}from"./chunk-HVPVQXOI.js";import{A as f,B as y,D as P,N as c,Na as k,R as M,U as x,W as R,Xa as S,Z as b,aa as h,da as T,ea as a,fa as l,ja as I,ka as m,la as w,t as _,ta as p,ua as v,w as A}from"./chunk-GNQKHW6I.js";import{a as C,b as D,h as s}from"./chunk-ENRHZQ2S.js";function K(o,e){if(o&1){let t=I();a(0,"button",9),m("click",function(){f(t);let n=w();return y(n.onCancel())}),l()}}function Q(o,e){if(o&1){let t=I();a(0,"button",10),m("click",function(){f(t);let n=w();return y(n.onCancel())}),p(1,"Cancel"),l()}}var g=class o{dialogRef;type="info";title="Alert";message="";showCancel=!0;onOk(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=x({type:o,selectors:[["app-alert-dialog"]],inputs:{type:"type",title:"title",message:"message",showCancel:"showCancel"},decls:12,vars:7,consts:[[1,"modal-content"],[1,"tsway-modal-header"],[1,"tsway-modal-title"],["type","button","class","btn-close","aria-label","Close",3,"click",4,"ngIf"],[1,"tsway-modal-body"],[1,"mb-0"],[1,"tsway-modal-footer"],["type","button","class","btn btn-danger text-white me-2",3,"click",4,"ngIf"],["type","button",3,"click"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["type","button",1,"btn","btn-danger","text-white","me-2",3,"click"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"div",1)(2,"h5",2),p(3),l(),b(4,K,1,0,"button",3),l(),a(5,"div",4)(6,"p",5),p(7),l()(),a(8,"div",6),b(9,Q,2,0,"button",7),a(10,"button",8),m("click",function(){return i.onOk()}),p(11,"OK"),l()()()),t&2&&(c(3),v(i.title),c(),h("ngIf",i.showCancel),c(3),v(i.message),c(2),h("ngIf",i.showCancel),c(),T("btn btn-",i.type,""))},dependencies:[k],encapsulation:2})};var u=class o{constructor(e){this.dialog=e}show(e,t,i="info",n=!0){return s(this,null,function*(){let r=yield this.dialog.open(g,{title:e,message:t,type:i,showCancel:n},{width:"30%"});return new Promise(N=>{r.closed.subscribe(j=>{N(j)})})})}static \u0275fac=function(t){return new(t||o)(A(d))};static \u0275prov=_({token:o,factory:o.\u0275fac,providedIn:"root"})};var V=class o{models=[];filteredModels=[];paginatedModels=[];modelFilters={};modelService;dialog;alert;toast;router;paginationOption={currentPage:0,pageSize:100,startPage:0,total:0};constructor(e){this.dialog=e.get(d),this.alert=e.get(u),this.toast=e.get(E),this.router=e.get(S)}getFilterParams(){return[]}loadModels(){let e=new F;return e.show(),this.modelService.get(this.getFilterParams()).then(t=>(e.hide(),this.models=t,this.models)).catch(t=>[]).finally(()=>e.hide())}ngOnInit(){}addModel(){return s(this,null,function*(){yield this.openDialog()})}updateModel(t){return s(this,arguments,function*({model:e}){this.openDialog(e)})}deleteModel(t){return s(this,arguments,function*({model:e}){(yield this.alert.show("Delete Item","Are you sure you want to delete this item?","primary"))&&this.modelService.delete(e).then(n=>{for(let r=0;r<this.models.length;r++)if(this.models[r][this.models[r].getPrimaryKeyName()]===e[e.getPrimaryKeyName()]){this.models.splice(r,1);break}this.toast.success("Item deleted successfully."),this.applyFilters()})})}onFilterChange(e){this.paginationOption=D(C({},this.paginationOption),{startPage:0,currentPage:0}),this.modelFilters=e,this.applyFilters()}static \u0275fac=function(t){return new(t||o)(M(P))};static \u0275dir=R({type:o})};export{u as a,V as b};
