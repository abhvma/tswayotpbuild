import{C as M,H as v,J as x,L as b,M as w,N as R,P as d,Q as f,R as k,U as E,V as _,W as O,ca as y,ea as j,j as C,m as u,o as h,q as g,r as I,ra as T,t as l,wa as H,y as p}from"./chunk-DT5GXNXJ.js";function L(s,i){if(s&1){let e=E();d(0,"li",2),_("click",function(){let t=g(e).$implicit,c=O();return I(t.enabled!==!1&&c.onClick(t))}),k(1,"i"),y(2),f()}if(s&2){let e=i.$implicit;w("disabled",e.enabled===!1),p(),R("me-3 "+(e.icon||"")),p(),j(" ",e.label," ")}}var a=class s{menuItems=[];onItemClick=new l;onClick(i){this.onItemClick.emit(i)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=M({type:s,selectors:[["app-context-menu"]],inputs:{menuItems:"menuItems"},outputs:{onItemClick:"onItemClick"},decls:2,vars:1,consts:[[1,"context-menu","list-group","shadow-sm"],["class","list-group-item d-flex align-items-center",3,"disabled","click",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","align-items-center",3,"click"]],template:function(e,r){e&1&&(d(0,"ul",0),v(1,L,3,5,"li",1),f()),e&2&&(p(),b("ngForOf",r.menuItems))},dependencies:[H],styles:[".context-menu[_ngcontent-%COMP%]{background-color:#fff;padding:0;border-radius:4px;overflow:hidden;min-width:160px}.context-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .5s ease}.context-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#c7e6f94d}.context-menu[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]})};var P=class s{constructor(i,e){this.appRef=i;this.injector=e}menuComponentRef;itemSelected=new l;show(i,e,r="bottom",t=!0,c){this.close();let n=T(a,{environmentInjector:this.injector}),o=n.location.nativeElement;t||!c?document.body.appendChild(o):c.element.nativeElement.appendChild(o),this.appRef.attachView(n.hostView),n.instance.onItemClick.subscribe(m=>{this.itemSelected.emit(m),this.close()}),n.instance.menuItems=i,n.changeDetectorRef.detectChanges(),this.menuComponentRef=n,setTimeout(()=>{this.positionMenu(o,e,r),this.registerOutsideClick(o,e)},10)}close(){this.menuComponentRef&&(document.body.removeChild(this.menuComponentRef.location.nativeElement),this.appRef.detachView(this.menuComponentRef.hostView),this.menuComponentRef.destroy(),this.menuComponentRef=void 0)}registerOutsideClick(i,e){let r=t=>{!i.contains(t.target)&&t.target!==e&&(this.close(),document.removeEventListener("click",r))};document.addEventListener("click",r)}positionMenu(i,e,r){i.style.position="fixed";let t=e.getBoundingClientRect(),c=i.getBoundingClientRect(),n=0,o=0,m=4;({top:()=>{n=t.top-c.height-m,o=t.left},bottom:()=>{n=t.bottom+m,o=t.left},left:()=>{n=t.top,o=t.left-c.width-m},right:()=>{n=t.top,o=t.right+m}})[r](),o+c.width>window.innerWidth&&(o=window.innerWidth-c.width-m),o<0&&(o=m),n+c.height>window.innerHeight&&(n=window.innerHeight-c.height-m),n<0&&(n=m),Object.assign(i.style,{position:"fixed",top:`${n}px`,left:`${o}px`,zIndex:"2000"})}static \u0275fac=function(e){return new(e||s)(u(x),u(h))};static \u0275prov=C({token:s,factory:s.\u0275fac,providedIn:"root"})};export{P as a};
