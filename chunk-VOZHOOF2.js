import{c as w}from"./chunk-RCHMHXMA.js";import"./chunk-KH7BRNI5.js";import"./chunk-ZGDWY67E.js";import{a as j}from"./chunk-HVPVQXOI.js";import{Ab as N,Bb as E,Hb as M,Ib as L,N as l,Oa as v,R as a,U as f,V as g,Xa as b,_a as S,aa as p,ea as o,fa as t,ga as d,ka as h,ta as r,u as c,vb as y,wb as u,xb as x,yb as F,zb as C}from"./chunk-WNWZG4BB.js";import"./chunk-ENRHZQ2S.js";var s=class n{constructor(i,e,m){this.fb=i;this.authService=e;this.router=m;this.loginForm=this.fb.group({username:["",u.required],password:["",u.required]})}showErrorMessage=!1;loginForm;onNgInit(){this.authService.verifySession().then(i=>{this.router.navigate(["/manage"])})}onSubmit(){let i=new j;this.loginForm.valid?(this.showErrorMessage=!1,i.show(),this.authService.login(this.loginForm.value.username,this.loginForm.value.password).then(e=>{this.router.navigate(["/manage"])}).catch(e=>{console.error(e)}).finally(()=>{i.hide()})):this.showErrorMessage=!0}static \u0275fac=function(e){return new(e||n)(a(M),a(w),a(b))};static \u0275cmp=f({type:n,selectors:[["app-login"]],standalone:!1,decls:21,vars:2,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100"],[1,"card","p-4","text-center",2,"min-width","300px","max-width","400px","width","100%"],[1,"mb-3"],[1,"mx-auto","d-flex","align-items-center","justify-content-center","bg-secondary","rounded-circle",2,"width","80px","height","80px"],[1,"text-white","fw-bold","fs-4"],[1,"mb-1"],[1,"text-muted","mb-3"],[3,"ngSubmit","formGroup"],[1,"mb-3","text-start"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"]],template:function(e,m){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5,"Logo"),t()()(),o(6,"h4",5),r(7,"Key Management System"),t(),o(8,"h6",6),r(9,"Login"),t(),o(10,"form",7),h("ngSubmit",function(){return m.onSubmit()}),o(11,"div",8)(12,"label",9),r(13,"Username"),t(),d(14,"input",10),t(),o(15,"div",8)(16,"label",11),r(17,"Password"),t(),d(18,"input",12),t(),o(19,"button",13),r(20," Login "),t()()()()),e&2&&(l(10),p("formGroup",m.loginForm),l(9),p("disabled",m.loginForm.invalid))},dependencies:[C,y,x,F,N,E],encapsulation:2})};var I=[{path:"",component:s}],R=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=g({type:n});static \u0275inj=c({imports:[v,L,S.forChild(I)]})};export{R as AuthModule};
