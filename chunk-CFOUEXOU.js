import{a as d}from"./chunk-4MZHQOIT.js";import{a as F}from"./chunk-7VL2AYZC.js";import{a as O}from"./chunk-HVPVQXOI.js";import{B as f,C as y,E as A,O as c,S as M,Ta as k,V as S,X as x,_ as b,ba as h,bb as T,ea as R,fa as a,ga as l,ka as I,la as m,ma as w,u as _,ua as p,va as v,x as P}from"./chunk-Y6X5IISN.js";import{a as C,b as D,h as s}from"./chunk-ENRHZQ2S.js";function K(i,e){if(i&1){let t=I();a(0,"button",9),m("click",function(){f(t);let n=w();return y(n.onCancel())}),l()}}function z(i,e){if(i&1){let t=I();a(0,"button",10),m("click",function(){f(t);let n=w();return y(n.onCancel())}),p(1,"Cancel"),l()}}var g=class i{dialogRef;type="info";title="Alert";message="";showCancel=!0;onOk(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-alert-dialog"]],inputs:{type:"type",title:"title",message:"message",showCancel:"showCancel"},decls:12,vars:7,consts:[[1,"modal-content"],[1,"tsway-modal-header"],[1,"tsway-modal-title"],["type","button","class","btn-close","aria-label","Close",3,"click",4,"ngIf"],[1,"tsway-modal-body"],[1,"mb-0"],[1,"tsway-modal-footer"],["type","button","class","btn btn-danger text-white me-2",3,"click",4,"ngIf"],["type","button",3,"click"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["type","button",1,"btn","btn-danger","text-white","me-2",3,"click"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"h5",2),p(3),l(),b(4,K,1,0,"button",3),l(),a(5,"div",4)(6,"p",5),p(7),l()(),a(8,"div",6),b(9,z,2,0,"button",7),a(10,"button",8),m("click",function(){return o.onOk()}),p(11,"OK"),l()()()),t&2&&(c(3),v(o.title),c(),h("ngIf",o.showCancel),c(3),v(o.message),c(2),h("ngIf",o.showCancel),c(),R("btn btn-",o.type,""))},dependencies:[k],encapsulation:2})};var u=class i{constructor(e){this.dialog=e}show(e,t,o="info",n=!0){return s(this,null,function*(){let r=yield this.dialog.open(g,{title:e,message:t,type:o,showCancel:n},{width:"30%"});return new Promise(N=>{r.closed.subscribe(j=>{N(j)})})})}static \u0275fac=function(t){return new(t||i)(P(d))};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var V=class i{models=[];filteredModels=[];paginatedModels=[];modelFilters={};modelService;dialog;alert;toast;router;paginationOption={currentPage:0,pageSize:200,startPage:0,total:0};constructor(e){this.dialog=e.get(d),this.alert=e.get(u),this.toast=e.get(F),this.router=e.get(T)}getFilterParams(){return[]}getOrder(){return{}}loadModels(e=!1){let t=new O;t.show();let o=e?this.modelService.paginate(this.getFilterParams(),this.getOrder(),this.paginationOption.currentPage,this.paginationOption.pageSize):this.modelService.get(this.getFilterParams(),this.getOrder());return o.then(n=>(t.hide(),this.models=n,this.models)).catch(n=>[]).finally(()=>t.hide()),o}ngOnInit(){}addModel(){return s(this,null,function*(){yield this.openDialog()})}updateModel(t){return s(this,arguments,function*({model:e}){this.openDialog(e)})}deleteModel(t){return s(this,arguments,function*({model:e}){(yield this.alert.show("Delete Item","Are you sure you want to delete this item?","primary"))&&this.modelService.delete(e).then(n=>{for(let r=0;r<this.models.length;r++)if(this.models[r][this.models[r].getPrimaryKeyName()]===e[e.getPrimaryKeyName()]){this.models.splice(r,1);break}this.toast.success("Item deleted successfully."),this.applyFilters()})})}onFilterChange(e){this.paginationOption=D(C({},this.paginationOption),{startPage:0,currentPage:0}),this.modelFilters=e,this.applyFilters()}static \u0275fac=function(t){return new(t||i)(M(A))};static \u0275dir=x({type:i})};export{u as a,V as b};
