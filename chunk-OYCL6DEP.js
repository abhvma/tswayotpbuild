import{A as P,Aa as N,B as p,C as m,Eb as q,F as x,Fa as w,Ga as _,Hb as V,Jb as R,N as k,O as o,S as A,Sa as F,Ta as D,V as K,Y as f,_ as u,_a as H,ba as l,ca as O,fa as a,ga as s,ha as b,ka as M,la as h,ma as c,ua as d,va as g,ya as E,za as I}from"./chunk-Y6X5IISN.js";var S=class n{transform(e){let t=e.slice(0,3),i=e.slice(e.length-4,e.length-1);return t+"*".repeat(10)+i}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=f({name:"keySecret",type:n,pure:!0,standalone:!1})};var j=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 128 48"
  width="48"
  height="18"
  style="
    --otp-body: #ffffff;
    --otp-screen: #b3b3b3;
    --otp-button: #ffffff;
    --otp-stroke: #000000;
  "
>
  <rect x="4" y="6" width="120" height="36" rx="18"
        fill="var(--otp-body)" stroke="var(--otp-stroke)" stroke-width="1"/>

  <circle cx="14" cy="24" r="6" fill="none" stroke="var(--otp-stroke)" stroke-width="2" opacity=".6"/>
  <circle cx="14" cy="24" r="3.5" fill="none" stroke="var(--otp-stroke)" stroke-width="1" opacity=".4"/>

  <rect x="42" y="14" width="44" height="20" rx="4" fill="#0b1220" opacity=".45"/>
  <rect x="44" y="16" width="40" height="16" rx="3" fill="var(--otp-screen)"/>

  <g opacity=".55">
    <rect x="48" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
    <rect x="60" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
    <rect x="72" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
  </g>

  <circle cx="104" cy="24" r="8" fill="var(--otp-button)" stroke="var(--otp-stroke)" stroke-width="1"/>
  <circle cx="104" cy="24" r="5" fill="#ffffff" opacity=".6"/>
</svg>
`,C=class n{constructor(e){this.sanitizer=e}transform(e){let t;switch(e){case 2:t='<i class="bi bi-credit-card"></i>';break;case 3:t=j;break;default:t='<i class="bi bi-exclamation"></i>';break}return this.sanitizer.bypassSecurityTrustHtml(t)}static \u0275fac=function(t){return new(t||n)(A(H,16))};static \u0275pipe=f({name:"serialKeyType",type:n,pure:!0,standalone:!1})};var v=class n{transform(e,...t){let i="",r="";switch(e){case 0:i="bg-info",r="Created";break;case 1:i="bg-warning",r="Registered";break;case 2:i="bg-success",r="Enrolled";break;case 3:i="bg-primary",r="Active";break;case 4:i="bg-secondary",r="Revoked";break;case-1:i="badge-error",r="Unknown";break}return`<span class='badge badge-pill ${i}'>${r}</span>`}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=f({name:"serialNumberStatus",type:n,pure:!0,standalone:!1})};function W(n,e){if(n&1){let t=M();a(0,"div",4)(1,"div",5)(2,"input",6),N("ngModelChange",function(r){p(t);let y=c();return I(y.selectAllChecked,r)||(y.selectAllChecked=r),m(r)}),h("change",function(){p(t);let r=c();return m(r.onSelectAll())}),s(),a(3,"label",7),d(4,"Select All"),s()(),a(5,"div",5)(6,"div",8)(7,"button",9),h("click",function(){p(t);let r=c();return m(r.sendForManufacturing())}),b(8,"i",10),d(9," Registered "),s(),a(10,"button",9),h("click",function(){p(t);let r=c();return m(r.markAsDelivered())}),b(11,"i",11),d(12," Enrolled "),s()()()()}if(n&2){let t=c();o(2),E("ngModel",t.selectAllChecked),o(5),l("disabled",t.getManufacturingDisableState()),o(3),l("disabled",t.getReceivedDisableState())}}function G(n,e){if(n&1&&(a(0,"th",12),d(1),s()),n&2){let t=e.$implicit;l("width",t.width),o(),g(t.label)}}function J(n,e){if(n&1&&(b(0,"td",16),w(1,"serialNumberStatus")),n&2){let t=c().$implicit,i=c();l("width",i.columns[4].width)("innerHTML",_(1,2,t.status),k)}}function Q(n,e){if(n&1){let t=M();a(0,"tr",13),h("click",function(){let r=p(t).$implicit,y=c();return m(y.onRowSelect(r))}),b(1,"td",14),w(2,"serialKeyType"),a(3,"td",12),d(4),s(),a(5,"td",12),d(6),w(7,"keySecret"),s(),a(8,"td",12),d(9),s(),u(10,J,2,4,"td",15),s()}if(n&2){let t=e.$implicit,i=c();O("selected",i.isSelected(t)),o(),l("innerHTML",_(2,11,t.otpType),k)("width",i.columns[0].width),o(2),l("width",i.columns[1].width),o(),g(t.sequenceNumber.toString().padStart(6,"0")),o(),l("width",i.columns[2].width),o(),g(_(7,13,t.otpKey)),o(2),l("width",i.columns[3].width),o(),g(t.createdDate.date()),o(),l("ngIf",!i.selection)}}var z=class n{selection=!1;models=[];showActionBar=!0;rowSelect=new x;fixedHeader=!1;sendForManufacturingAction=new x;markAsDeliveredAction=new x;selectedModels={};columns=[];selectAllChecked=!1;constructor(){}ngOnInit(){this.columns=[{label:"Type",width:"10%"},{label:"Sequence Number",width:"20%"},{label:"Key",width:"40%"},{label:"Created Date",width:"20%"}],this.selection||this.columns.push({label:"Status",width:"10%"})}ngOnChanges(e){e.models&&(this.selectedModels={},this.selectAllChecked=!1)}onRowSelect(e){this.selectedModels[e.sequenceNumber]?delete this.selectedModels[e.sequenceNumber]:this.selectedModels[e.sequenceNumber]=e,this.rowSelect.emit(e)}onRowToggle(e){this.selectedModels[e.sequenceNumber]?delete this.selectedModels[e.sequenceNumber]:this.selectedModels[e.sequenceNumber]=e,this.selectAllChecked=this.models.length>0&&this.models.every(t=>this.selectedModels[t.sequenceNumber])}onSelectAll(){this.selectedModels={},this.selectAllChecked&&this.models.forEach(e=>{this.selectedModels[e.sequenceNumber]=e})}isSelected(e){return!!this.selectedModels[e.sequenceNumber]}hasSelection(){return Object.values(this.selectedModels).length>0}sendForManufacturing(){let e=this.models.filter(t=>this.selectedModels[t.sequenceNumber]);this.sendForManufacturingAction.emit(e)}markAsDelivered(){let e=this.models.filter(t=>this.selectedModels[t.sequenceNumber]);this.markAsDeliveredAction.emit(e)}getManufacturingDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(e=>e.status==0):!0}getReceivedDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(e=>e.status==1):!0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=K({type:n,selectors:[["app-otp-serial-key-table"]],inputs:{selection:"selection",models:"models",showActionBar:"showActionBar",fixedHeader:"fixedHeader"},outputs:{rowSelect:"rowSelect",sendForManufacturingAction:"sendForManufacturingAction",markAsDeliveredAction:"markAsDeliveredAction"},standalone:!1,features:[P],decls:7,vars:5,consts:[["class","d-flex justify-content-between align-items-center mb-2 p-2 toolbar",4,"ngIf"],[1,"tsway-datatable","striped"],[3,"width",4,"ngFor","ngForOf"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-2","p-2","toolbar"],[1,"d-flex","align-items-center","gap-2"],["id","selectAll","type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["role","button","for","selectAll",1,"mb-0"],["role","group","aria-label","Primary Actions",1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-secondary","d-flex","align-items-center",3,"click","disabled"],[1,"bi","bi-gear-fill","me-1"],[1,"bi","bi-check-circle-fill","me-1"],[3,"width"],[3,"click"],[3,"innerHTML","width"],[3,"width","innerHTML",4,"ngIf"],[3,"width","innerHTML"]],template:function(t,i){t&1&&(u(0,W,13,3,"div",0),a(1,"table",1)(2,"thead")(3,"tr"),u(4,G,2,2,"th",2),s()(),a(5,"tbody"),u(6,Q,11,15,"tr",3),s()()),t&2&&(l("ngIf",i.showActionBar),o(),O("fixed-header",i.fixedHeader),o(3),l("ngForOf",i.columns),o(2),l("ngForOf",i.models))},dependencies:[q,V,F,D,R,S,C,v],styles:['@charset "UTF-8";table.fixed-header[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;height:100%;overflow-y:auto}table.fixed-header[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#8adbff}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px 16px;border:1px solid #f3f3f3;border-radius:8px}.action-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-left:6px}.btn-action[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;background:#007bff;color:#fff}.btn-action[_ngcontent-%COMP%]:hover:enabled{background:#0056b3}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-action.success[_ngcontent-%COMP%]{background:#28a745}.btn-action.success[_ngcontent-%COMP%]:hover:enabled{background:#1e7e34}tr.selected[_ngcontent-%COMP%]{background-color:#7db9de!important;border-bottom:1px solid #ffffff;color:#fff}']})};export{S as a,v as b,z as c};
