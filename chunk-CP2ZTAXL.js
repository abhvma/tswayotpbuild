import{a as V}from"./chunk-N5DRZIOL.js";import{B as T,C as A,Ca as N,F as x,H as b,L as o,M as k,P as s,Q as c,R as u,U as O,V as h,W as a,ca as d,da as p,ga as P,ha as D,hb as F,ia as E,kb as H,mb as q,na as _,oa as w,p as M,q as m,r as f,t as y,wa as I,x as v,xa as K,y as r}from"./chunk-N56VVWT6.js";var B=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 128 48"
  width="48"
  height="18"
  style="
    --otp-body: #ffffff;
    --otp-screen: #b3b3b3;
    --otp-button: #ffffff;
    --otp-stroke: #000000;
  "
>
  <rect x="4" y="6" width="120" height="36" rx="18"
        fill="var(--otp-body)" stroke="var(--otp-stroke)" stroke-width="1"/>

  <circle cx="14" cy="24" r="6" fill="none" stroke="var(--otp-stroke)" stroke-width="2" opacity=".6"/>
  <circle cx="14" cy="24" r="3.5" fill="none" stroke="var(--otp-stroke)" stroke-width="1" opacity=".4"/>

  <rect x="42" y="14" width="44" height="20" rx="4" fill="#0b1220" opacity=".45"/>
  <rect x="44" y="16" width="40" height="16" rx="3" fill="var(--otp-screen)"/>

  <g opacity=".55">
    <rect x="48" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
    <rect x="60" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
    <rect x="72" y="22" width="6" height="2.5" rx="1.25" fill="#ffffff"/>
  </g>

  <circle cx="104" cy="24" r="8" fill="var(--otp-button)" stroke="var(--otp-stroke)" stroke-width="1"/>
  <circle cx="104" cy="24" r="5" fill="#ffffff" opacity=".6"/>
</svg>
`,C=class n{constructor(i){this.sanitizer=i}transform(i,e){let t="";switch(e=e||{label:!1,icon:!0},i){case 2:e.icon&&(t+='<i class="bi bi-credit-card"></i>'),e.label&&(t+=" Card");break;case 3:e.icon&&(t+=B),e.label&&(t+=" Token");break;case 1:e.icon&&(t+='<i class="bi bi-phone"></i>'),e.label&&(t+=" Mobile");break;case 4:e.icon&&(t+='<i class="bi bi-terminal"></i>'),e.label&&(t+=" Console");break;default:e.icon&&(t+='<i class="bi bi-exclamation"></i>'),e.label&&(t+=" Unknown");break}return this.sanitizer.bypassSecurityTrustHtml(t)}static \u0275fac=function(e){return new(e||n)(T(N,16))};static \u0275pipe=x({name:"otpType",type:n,pure:!0,standalone:!1})};var S=class n{transform(i,...e){let t="",l="";switch(i){case 0:t="bg-info",l="Created";break;case 1:t="bg-warning",l="Registered";break;case 2:t="bg-success",l="Enrolled";break;case 3:t="bg-primary",l="Active";break;case 4:t="bg-secondary",l="Revoked";break;case-1:t="badge-error",l="Unknown";break}return`<span class='badge badge-pill ${t}'>${l}</span>`}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=x({name:"serialNumberStatus",type:n,pure:!0,standalone:!1})};function U(n,i){if(n&1){let e=O();s(0,"div",4)(1,"div",5)(2,"input",6),E("ngModelChange",function(l){m(e);let g=a();return D(g.selectAllChecked,l)||(g.selectAllChecked=l),f(l)}),h("change",function(){m(e);let l=a();return f(l.onSelectAll())}),c(),s(3,"label",7),d(4,"Select All"),c()(),s(5,"div",5)(6,"div",8)(7,"button",9),h("click",function(){m(e);let l=a();return f(l.sendForManufacturing())}),u(8,"i",10),d(9," Registered "),c(),s(10,"button",9),h("click",function(){m(e);let l=a();return f(l.markAsDelivered())}),u(11,"i",11),d(12," Enrolled "),c()()()()}if(n&2){let e=a();r(2),P("ngModel",e.selectAllChecked),r(5),o("disabled",e.getManufacturingDisableState()),r(3),o("disabled",e.getReceivedDisableState())}}function W(n,i){if(n&1&&(s(0,"th",12),d(1),c()),n&2){let e=i.$implicit;o("width",e.width),r(),p(e.label)}}function G(n,i){if(n&1&&(s(0,"td",12),d(1),c()),n&2){let e=a().$implicit,t=a();o("width",t.columns[4].width),r(),p((e.manufacturingDispatchDate==null?null:e.manufacturingDispatchDate.date())||"NA")}}function J(n,i){if(n&1&&(s(0,"td",12),d(1),c()),n&2){let e=a().$implicit,t=a();o("width",t.columns[5].width),r(),p((e.productDeliveryDate==null?null:e.productDeliveryDate.date())||"NA")}}function Q(n,i){if(n&1&&(s(0,"td",12),d(1),c()),n&2){let e=a().$implicit,t=a();o("width",t.columns[6].width),r(),p((e.keyAssignedDate==null?null:e.keyAssignedDate.date())||"NA")}}function X(n,i){if(n&1&&(u(0,"td",17),_(1,"serialNumberStatus")),n&2){let e=a().$implicit,t=a();o("width",t.columns[7].width)("innerHTML",w(1,2,e.status),v)}}function Y(n,i){if(n&1){let e=O();s(0,"tr",13),h("click",function(){let l=m(e).$implicit,g=a();return f(g.onRowSelect(l))}),u(1,"td",14),_(2,"otpType"),s(3,"td",12),d(4),c(),s(5,"td",12),d(6),_(7,"keySecret"),c(),s(8,"td",12),d(9),c(),b(10,G,2,2,"td",15)(11,J,2,2,"td",15)(12,Q,2,2,"td",15)(13,X,2,4,"td",16),c()}if(n&2){let e=i.$implicit,t=a();k("selected",t.isSelected(e)),r(),o("innerHTML",w(2,14,e.otpType),v)("width",t.columns[0].width),r(2),o("width",t.columns[1].width),r(),p(e.sequenceNumber.toString().padStart(6,"0")),r(),o("width",t.columns[2].width),r(),p(w(7,16,e.otpKey)),r(2),o("width",t.columns[3].width),r(),p(e.createdDate.date()),r(),o("ngIf",!t.selection),r(),o("ngIf",!t.selection),r(),o("ngIf",!t.selection),r(),o("ngIf",!t.selection)}}var z=class n{selection=!1;models=[];showActionBar=!0;rowSelect=new y;fixedHeader=!1;sendForManufacturingAction=new y;markAsDeliveredAction=new y;selectedModels={};columns=[];selectAllChecked=!1;constructor(){}ngOnInit(){this.columns=[{label:"Type",width:"15%"},{label:"Sequence Number",width:"25%"},{label:"Key",width:"35%"},{label:"Created Date",width:"25%"}],this.selection||(this.columns=[{label:"Type",width:"10%"},{label:"Sequence Number",width:"15%"},{label:"Key",width:"25%"},{label:"Created Date",width:"15%"},{label:"Registered Date",width:"10%"},{label:"Enrolled Date",width:"10%"},{label:"Active Date",width:"10%"},{label:"Status",width:"5%"}])}ngOnChanges(i){i.models&&(this.selectedModels={},this.selectAllChecked=!1)}onRowSelect(i){this.selectedModels[i.sequenceNumber]?delete this.selectedModels[i.sequenceNumber]:this.selectedModels[i.sequenceNumber]=i,this.rowSelect.emit(i)}onRowToggle(i){this.selectedModels[i.sequenceNumber]?delete this.selectedModels[i.sequenceNumber]:this.selectedModels[i.sequenceNumber]=i,this.selectAllChecked=this.models.length>0&&this.models.every(e=>this.selectedModels[e.sequenceNumber])}onSelectAll(){this.selectedModels={},this.selectAllChecked&&this.models.forEach(i=>{this.selectedModels[i.sequenceNumber]=i})}isSelected(i){return!!this.selectedModels[i.sequenceNumber]}hasSelection(){return Object.values(this.selectedModels).length>0}sendForManufacturing(){let i=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.sendForManufacturingAction.emit(i)}markAsDelivered(){let i=this.models.filter(e=>this.selectedModels[e.sequenceNumber]);this.markAsDeliveredAction.emit(i)}getManufacturingDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(i=>i.status==0):!0}getReceivedDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(i=>i.status==1):!0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-otp-serial-key-table"]],inputs:{selection:"selection",models:"models",showActionBar:"showActionBar",fixedHeader:"fixedHeader"},outputs:{rowSelect:"rowSelect",sendForManufacturingAction:"sendForManufacturingAction",markAsDeliveredAction:"markAsDeliveredAction"},standalone:!1,features:[M],decls:7,vars:5,consts:[["class","d-flex justify-content-between align-items-center mb-2 p-2 toolbar",4,"ngIf"],[1,"tsway-datatable","striped"],[3,"width",4,"ngFor","ngForOf"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-2","p-2","toolbar"],[1,"d-flex","align-items-center","gap-2"],["id","selectAll","type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["role","button","for","selectAll",1,"mb-0"],["role","group","aria-label","Primary Actions",1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-secondary","d-flex","align-items-center",3,"click","disabled"],[1,"bi","bi-gear-fill","me-1"],[1,"bi","bi-check-circle-fill","me-1"],[3,"width"],[3,"click"],[3,"innerHTML","width"],[3,"width",4,"ngIf"],[3,"width","innerHTML",4,"ngIf"],[3,"width","innerHTML"]],template:function(e,t){e&1&&(b(0,U,13,3,"div",0),s(1,"table",1)(2,"thead")(3,"tr"),b(4,W,2,2,"th",2),c()(),s(5,"tbody"),b(6,Y,14,18,"tr",3),c()()),e&2&&(o("ngIf",t.showActionBar),r(),k("fixed-header",t.fixedHeader),r(3),o("ngForOf",t.columns),r(2),o("ngForOf",t.models))},dependencies:[F,H,I,K,q,V,S,C],styles:['@charset "UTF-8";table.fixed-header[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;height:100%;overflow-y:auto}table.fixed-header[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#8adbff}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px 16px;border:1px solid #f3f3f3;border-radius:8px}.action-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-left:6px}.btn-action[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;background:#007bff;color:#fff}.btn-action[_ngcontent-%COMP%]:hover:enabled{background:#0056b3}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-action.success[_ngcontent-%COMP%]{background:#28a745}.btn-action.success[_ngcontent-%COMP%]:hover:enabled{background:#1e7e34}tr.selected[_ngcontent-%COMP%]{background-color:#7db9de!important;border-bottom:1px solid #ffffff;color:#fff}']})};export{S as a,B as b,C as c,z as d};
