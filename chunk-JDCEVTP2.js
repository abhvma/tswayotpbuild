import{A as P,Aa as I,B as p,C as m,Eb as D,F as _,Fa as x,Ga as S,Hb as V,Jb as q,N as M,O as a,Sa as N,Ta as F,V as A,Y as u,_ as b,ba as o,ca as v,fa as l,ga as s,ha as f,ka as k,la as g,ma as c,ua as d,va as h,ya as K,za as E}from"./chunk-Y6X5IISN.js";var C=class n{transform(e){let t=e.slice(0,3),i=e.slice(e.length-4,e.length-1);return t+"*".repeat(10)+i}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=u({name:"keySecret",type:n,pure:!0,standalone:!1})};var w=class n{transform(e,...t){let i="",r="";switch(e){case 2:i="bi-credit-card",r="Card";break;case 3:i="bi-safe",r="Token";break;default:i="bi-exclamation",r="Invalid";break}return`<span class=''><i class="bi ${i} me-1"></i></span>`}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=u({name:"serialKeyType",type:n,pure:!0,standalone:!1})};var O=class n{transform(e,...t){let i="",r="";switch(e){case 0:i="bg-info",r="Created";break;case 1:i="bg-warning",r="Manufacturing";break;case 2:i="bg-success",r="Received";break;case 3:i="bg-primary",r="Assigned";break;case 4:i="bg-secondary",r="Inactive";break;case-1:i="badge-error",r="Unknown";break}return`<span class='badge badge-pill ${i}'>${r}</span>`}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=u({name:"serialNumberStatus",type:n,pure:!0,standalone:!1})};function $(n,e){if(n&1){let t=k();l(0,"div",4)(1,"div",5)(2,"input",6),I("ngModelChange",function(r){p(t);let y=c();return E(y.selectAllChecked,r)||(y.selectAllChecked=r),m(r)}),g("change",function(){p(t);let r=c();return m(r.onSelectAll())}),s(),l(3,"label",7),d(4,"Select All"),s()(),l(5,"div",5)(6,"div",8)(7,"button",9),g("click",function(){p(t);let r=c();return m(r.sendForManufacturing())}),f(8,"i",10),d(9," Manufacturing "),s(),l(10,"button",9),g("click",function(){p(t);let r=c();return m(r.markAsDelivered())}),f(11,"i",11),d(12," Received "),s()()()()}if(n&2){let t=c();a(2),K("ngModel",t.selectAllChecked),a(5),o("disabled",t.getManufacturingDisableState()),a(3),o("disabled",t.getReceivedDisableState())}}function z(n,e){if(n&1&&(l(0,"th",12),d(1),s()),n&2){let t=e.$implicit;o("width",t.width),a(),h(t.label)}}function U(n,e){if(n&1&&(f(0,"td",16),x(1,"serialNumberStatus")),n&2){let t=c().$implicit,i=c();o("width",i.columns[4].width)("innerHTML",S(1,2,t.status),M)}}function W(n,e){if(n&1){let t=k();l(0,"tr",13),g("click",function(){let r=p(t).$implicit,y=c();return m(y.onRowSelect(r))}),f(1,"td",14),x(2,"serialKeyType"),l(3,"td",12),d(4),s(),l(5,"td",12),d(6),x(7,"keySecret"),s(),l(8,"td",12),d(9),s(),b(10,U,2,4,"td",15),s()}if(n&2){let t=e.$implicit,i=c();v("selected",i.isSelected(t)),a(),o("innerHTML",S(2,11,t.otpType),M)("width",i.columns[0].width),a(2),o("width",i.columns[1].width),a(),h(t.sequenceNumber.toString().padStart(6,"0")),a(),o("width",i.columns[2].width),a(),h(S(7,13,t.otpKey)),a(2),o("width",i.columns[3].width),a(),h(t.createdDate.date()),a(),o("ngIf",!i.selection)}}var H=class n{selection=!1;models=[];showActionBar=!0;rowSelect=new _;fixedHeader=!1;sendForManufacturingAction=new _;markAsDeliveredAction=new _;selectedModels={};columns=[];selectAllChecked=!1;constructor(){}ngOnInit(){this.columns=[{label:"Type",width:"10%"},{label:"Sequence Number",width:"20%"},{label:"Key",width:"40%"},{label:"Created Date",width:"20%"}],this.selection||this.columns.push({label:"Status",width:"10%"})}ngOnChanges(e){e.models&&(this.selectedModels={},this.selectAllChecked=!1)}onRowSelect(e){this.selectedModels[e.sequenceNumber]?delete this.selectedModels[e.sequenceNumber]:this.selectedModels[e.sequenceNumber]=e,this.rowSelect.emit(e)}onRowToggle(e){this.selectedModels[e.sequenceNumber]?delete this.selectedModels[e.sequenceNumber]:this.selectedModels[e.sequenceNumber]=e,this.selectAllChecked=this.models.length>0&&this.models.every(t=>this.selectedModels[t.sequenceNumber])}onSelectAll(){this.selectedModels={},this.selectAllChecked&&this.models.forEach(e=>{this.selectedModels[e.sequenceNumber]=e})}isSelected(e){return!!this.selectedModels[e.sequenceNumber]}hasSelection(){return Object.values(this.selectedModels).length>0}sendForManufacturing(){let e=this.models.filter(t=>this.selectedModels[t.sequenceNumber]);this.sendForManufacturingAction.emit(e)}markAsDelivered(){let e=this.models.filter(t=>this.selectedModels[t.sequenceNumber]);this.markAsDeliveredAction.emit(e)}getManufacturingDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(e=>e.status==0):!0}getReceivedDisableState(){return this.hasSelection()?!Object.values(this.selectedModels).every(e=>e.status==1):!0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=A({type:n,selectors:[["app-otp-serial-key-table"]],inputs:{selection:"selection",models:"models",showActionBar:"showActionBar",fixedHeader:"fixedHeader"},outputs:{rowSelect:"rowSelect",sendForManufacturingAction:"sendForManufacturingAction",markAsDeliveredAction:"markAsDeliveredAction"},standalone:!1,features:[P],decls:7,vars:5,consts:[["class","d-flex justify-content-between align-items-center mb-2 p-2 toolbar",4,"ngIf"],[1,"tsway-datatable","striped"],[3,"width",4,"ngFor","ngForOf"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-2","p-2","toolbar"],[1,"d-flex","align-items-center","gap-2"],["id","selectAll","type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["role","button","for","selectAll",1,"mb-0"],["role","group","aria-label","Primary Actions",1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-secondary","d-flex","align-items-center",3,"click","disabled"],[1,"bi","bi-gear-fill","me-1"],[1,"bi","bi-check-circle-fill","me-1"],[3,"width"],[3,"click"],[3,"innerHTML","width"],[3,"width","innerHTML",4,"ngIf"],[3,"width","innerHTML"]],template:function(t,i){t&1&&(b(0,$,13,3,"div",0),l(1,"table",1)(2,"thead")(3,"tr"),b(4,z,2,2,"th",2),s()(),l(5,"tbody"),b(6,W,11,15,"tr",3),s()()),t&2&&(o("ngIf",i.showActionBar),a(),v("fixed-header",i.fixedHeader),a(3),o("ngForOf",i.columns),a(2),o("ngForOf",i.models))},dependencies:[D,V,N,F,q,C,w,O],styles:['@charset "UTF-8";table.fixed-header[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;height:100%;overflow-y:auto}table.fixed-header[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table.fixed-header[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}table.fixed-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#8adbff}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:10px 16px;border:1px solid #f3f3f3;border-radius:8px}.action-bar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-left:6px}.btn-action[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;background:#007bff;color:#fff}.btn-action[_ngcontent-%COMP%]:hover:enabled{background:#0056b3}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-action.success[_ngcontent-%COMP%]{background:#28a745}.btn-action.success[_ngcontent-%COMP%]:hover:enabled{background:#1e7e34}tr.selected[_ngcontent-%COMP%]{background-color:#7db9de!important;border-bottom:1px solid #ffffff;color:#fff}']})};export{C as a,O as b,H as c};
