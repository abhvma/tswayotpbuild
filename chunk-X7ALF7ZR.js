import{n as M}from"./chunk-N2X2I3O6.js";import{A as p,C as E,Wa as j,_ as L,c as f,ea as v,gb as I,x as h,y as C}from"./chunk-CBY2OJCD.js";import{h as R}from"./chunk-ENRHZQ2S.js";var T=class{constructor(e){this.closeFn=e}_closed=new f;closed=this._closed.asObservable();close(e){this._closed.next(e),this._closed.complete(),this.closeFn(e)}};var g=class o{constructor(e){this.appRef=e}getOptions(e){return{clickToClose:e?.clickToClose??!0,className:e?.className??"",width:e?.width??"auto"}}open(e,t,n){let{clickToClose:b,className:c}=this.getOptions(n),a=document.createElement("div"),l=document.createElement("div");l.classList.add("modal-dialog"),c&&a.classList.add(...c.split(" ")),n?.width&&(l.style.width=n.width),a.appendChild(l),a.classList.add("dialog-wrapper","tsway-modal","fade-in");let i=()=>R(this,null,function*(){a.classList.remove("fade-in"),yield this.delay(50),a.classList.add("fade-out"),yield this.delay(300),this.appRef.detachView(u.hostView),u.destroy(),document.body.removeChild(a),document.removeEventListener("keyup",s)}),s=d=>{d.key==="Escape"&&(i(),document.removeEventListener("keyup",s))};document.addEventListener("keyup",s);let r=document.createElement("div");r.classList.add("dialog-overlay","position-fixed","top-0","start-0","w-100","h-100","bg-dark","opacity-50"),a.appendChild(r),document.body.appendChild(a),b&&a.addEventListener("click",d=>{d.target===r&&i()});let u=this.appRef.bootstrap(e,l);if(t)for(let d in t)u.setInput(d,t[d]);let w=new T(i);return u.instance.dialogRef=w,Promise.resolve(w)}delay(e){return new Promise(t=>setTimeout(t,e))}static \u0275fac=function(t){return new(t||o)(p(v))};static \u0275prov=h({token:o,factory:o.\u0275fac})};var m=class{constructor(e){this.closeFn=e}closed=new f;close(e){this.closeFn(),this.closed.next(e),this.closed.complete()}};var y=class o{constructor(e,t){this.appRef=e;this.envInjector=t}containerMap=new Map;show(e,t,n={}){let b=n.position||"top|right";t=t||"default";let c=n.hideCloseButton??!1,a=n.duration??1e4,l=this.getOrCreateContainer(b),i=document.createElement("div");i.classList.add("toast-wrapper",`toast-${t}`),c&&i.classList.add("hide-close"),l.prepend(i);let s;if(typeof e=="string")i.innerHTML=`
        <div class="toast-content">${e}</div>
        ${c?"":'<button class="toast-close">&times;</button>'}
      `,s=new m(()=>{this.fadeAndRemove(i)}),c||i.querySelector(".toast-close")?.addEventListener("click",()=>s.close(null));else{let r=this.appRef.bootstrap(e,i);n.params&&Object.assign(r.instance,n.params),s=new m(()=>{this.fadeAndRemove(i),this.appRef.detachView(r.hostView),r.destroy()}),r.instance.toastRef=s}return setTimeout(()=>s.close(null),a),s}success(e,t={}){this.show(e,"success",t)}error(e,t={}){this.show(e,"error",t)}info(e,t={}){this.show(e,"info",t)}warning(e,t={}){this.show(e,"warning",t)}getOrCreateContainer(e){if(this.containerMap.has(e))return this.containerMap.get(e);let t=document.createElement("div");return t.classList.add("toast-container",...e.split("|").map(n=>n.trim())),document.body.appendChild(t),this.containerMap.set(e,t),t}fadeAndRemove(e){e.classList.add("fade-out"),setTimeout(()=>e.remove(),300)}static \u0275fac=function(t){return new(t||o)(p(v),p(E))};static \u0275prov=h({token:o,factory:o.\u0275fac})};var x=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=L({type:o});static \u0275inj=C({providers:[g,y],imports:[M,j,I]})};export{y as a,g as b,x as c};
